// Generated by CoffeeScript 2.5.1
// https://codesandbox.io/s/0vmjlmq94v?file=/index.js:0-2096 Ryan Carniato (h)

// Har ej fått denna att fungera än. Den fyller inte på todos med nya värden.
// Man måste refresha sidan för att se att det fungerar.
var createLocalStore;

import {
  createSignal,
  createEffect
} from "https://cdn.skypack.dev/solid-js@1.2.6";

import {
  // import { render }        from "https://cdn.skypack.dev/solid-js@1.2.6/web"
  // import h                 from "https://cdn.skypack.dev/solid-js@1.2.6/h"
  createStore
} from "https://cdn.skypack.dev/solid-js@1.2.6/store";

import {
  h3,
  input,
  button,
  div,
  r4r,
  log
} from "/js/utils.js";

createLocalStore = (initState) => {
  var setState, state;
  [state, setState] = createStore(initState);
  if (localStorage.todos) {
    setState(JSON.parse(localStorage.todos));
  }
  createEffect(() => {
    return localStorage.todos = JSON.stringify(state);
  });
  return [state, setState];
};

r4r(() => {
  var setState, state, todo;
  log('r4r');
  [state, setState] = createLocalStore({
    todos: [],
    title: "",
    idCounter: 0
  });
  return div({}, h3({}, "Simple Todos Example"), input({
    type: "text",
    placeholder: "enter todo and click +",
    value: () => {
      return state.title;
    },
    onInput: (e) => {
      return setState("title", e.target.value);
    }
  }), button({
    onClick: () => {
      return setState(((s) => {
        return {
          idCounter: s.idCounter + 1,
          todos: [
            ...s.todos,
            {
              id: state.idCounter,
              title: state.title,
              done: false
            }
          ],
          title: ""
        };
      }));
    }
  }, "+"), (function() {
    var i, len, ref, results;
    ref = state.todos;
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      todo = ref[i];
      results.push(div({}, input({
        type: "checkbox",
        checked: () => {
          return todo.done;
        },
        onChange: (e) => {
          return setState("todos", state.todos.findIndex((t) => {
            return t.id === todo.id;
          }), {
            done: e.target.checked
          });
        }
      }), input({
        type: "text",
        value: () => {
          return todo.title;
        },
        onChange: (e) => {
          return setState("todos", state.todos.findIndex((t) => {
            return t.id === todo.id;
          }), {
            title: e.target.value
          });
        }
      }), button({
        onClick: () => {
          return setState("todos", (t) => {
            return t.filter((t) => {
              return t.id !== todo.id;
            });
          });
        }
      }, "x")));
    }
    return results;
  }).call(this));
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoMi5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxza2V0Y2gyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBR3VEOzs7O0FBQUEsSUFBQTs7QUFFdkQsT0FBQTtFQUFTLFlBQVQ7RUFBdUIsWUFBdkI7Q0FBQSxNQUFBOztBQUdBLE9BQUE7OztFQUFTLFdBQVQ7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxFQUFUO0VBQVksS0FBWjtFQUFrQixNQUFsQjtFQUF5QixHQUF6QjtFQUE2QixHQUE3QjtFQUFpQyxHQUFqQztDQUFBLE1BQUE7O0FBRUEsZ0JBQUEsR0FBbUIsQ0FBQyxTQUFELENBQUEsR0FBQTtBQUNuQixNQUFBLFFBQUEsRUFBQTtFQUFDLENBQUMsS0FBRCxFQUFRLFFBQVIsQ0FBQSxHQUFvQixXQUFBLENBQVksU0FBWjtFQUNwQixJQUFHLFlBQVksQ0FBQyxLQUFoQjtJQUEyQixRQUFBLENBQVMsSUFBSSxDQUFDLEtBQUwsQ0FBVyxZQUFZLENBQUMsS0FBeEIsQ0FBVCxFQUEzQjs7RUFDQSxZQUFBLENBQWEsQ0FBQSxDQUFBLEdBQUE7V0FBRyxZQUFZLENBQUMsS0FBYixHQUFxQixJQUFJLENBQUMsU0FBTCxDQUFlLEtBQWY7RUFBeEIsQ0FBYjtTQUNBLENBQUMsS0FBRCxFQUFRLFFBQVI7QUFKa0I7O0FBTW5CLEdBQUEsQ0FBSSxDQUFBLENBQUEsR0FBQTtBQUNKLE1BQUEsUUFBQSxFQUFBLEtBQUEsRUFBQTtFQUFDLEdBQUEsQ0FBSSxLQUFKO0VBQ0EsQ0FBQyxLQUFELEVBQVEsUUFBUixDQUFBLEdBQW9CLGdCQUFBLENBQWlCO0lBQUMsS0FBQSxFQUFNLEVBQVA7SUFBVyxLQUFBLEVBQU0sRUFBakI7SUFBcUIsU0FBQSxFQUFVO0VBQS9CLENBQWpCO1NBQ3BCLEdBQUEsQ0FBSSxDQUFBLENBQUosRUFDQyxFQUFBLENBQUcsQ0FBQSxDQUFILEVBQU8sc0JBQVAsQ0FERCxFQUVDLEtBQUEsQ0FBTTtJQUNMLElBQUEsRUFBTSxNQUREO0lBRUwsV0FBQSxFQUFhLHdCQUZSO0lBR0wsS0FBQSxFQUFPLENBQUEsQ0FBQSxHQUFBO2FBQUcsS0FBSyxDQUFDO0lBQVQsQ0FIRjtJQUlMLE9BQUEsRUFBUyxDQUFDLENBQUQsQ0FBQSxHQUFBO2FBQU8sUUFBQSxDQUFTLE9BQVQsRUFBa0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUEzQjtJQUFQO0VBSkosQ0FBTixDQUZELEVBUUMsTUFBQSxDQUFPO0lBQ04sT0FBQSxFQUFTLENBQUEsQ0FBQSxHQUFBO2FBQ1IsUUFBQSxDQUFTLENBQUMsQ0FBQyxDQUFELENBQUEsR0FBQTtlQUFPO1VBQ2hCLFNBQUEsRUFBVyxDQUFDLENBQUMsU0FBRixHQUFjLENBRFQ7VUFFaEIsS0FBQSxFQUFPO1lBQUMsR0FBRyxDQUFDLENBQUMsS0FBTjtZQUFhO2NBQUMsRUFBQSxFQUFJLEtBQUssQ0FBQyxTQUFYO2NBQXFCLEtBQUEsRUFBTyxLQUFLLENBQUMsS0FBbEM7Y0FBd0MsSUFBQSxFQUFNO1lBQTlDLENBQWI7V0FGUztVQUdoQixLQUFBLEVBQU87UUFIUztNQUFQLENBQUQsQ0FBVDtJQURRO0VBREgsQ0FBUCxFQVFDLEdBUkQsQ0FSRDs7QUFpQkM7QUFBQTtJQUFBLEtBQUEscUNBQUE7O21CQUNDLEdBQUEsQ0FBSSxDQUFBLENBQUosRUFDQyxLQUFBLENBQU07UUFDTCxJQUFBLEVBQU0sVUFERDtRQUVMLE9BQUEsRUFBUyxDQUFBLENBQUEsR0FBQTtpQkFBRyxJQUFJLENBQUM7UUFBUixDQUZKO1FBR0wsUUFBQSxFQUFVLENBQUMsQ0FBRCxDQUFBLEdBQUE7aUJBQU8sUUFBQSxDQUFTLE9BQVQsRUFBaUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFaLENBQXNCLENBQUMsQ0FBRCxDQUFBLEdBQUE7bUJBQU8sQ0FBQyxDQUFDLEVBQUYsS0FBUSxJQUFJLENBQUM7VUFBcEIsQ0FBdEIsQ0FBakIsRUFBK0Q7WUFBQyxJQUFBLEVBQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQztVQUFoQixDQUEvRDtRQUFQO01BSEwsQ0FBTixDQURELEVBTUMsS0FBQSxDQUFNO1FBQ0wsSUFBQSxFQUFNLE1BREQ7UUFFTCxLQUFBLEVBQU8sQ0FBQSxDQUFBLEdBQUE7aUJBQUcsSUFBSSxDQUFDO1FBQVIsQ0FGRjtRQUdMLFFBQUEsRUFBVSxDQUFDLENBQUQsQ0FBQSxHQUFBO2lCQUFPLFFBQUEsQ0FBUyxPQUFULEVBQWlCLEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBWixDQUFzQixDQUFDLENBQUQsQ0FBQSxHQUFBO21CQUFPLENBQUMsQ0FBQyxFQUFGLEtBQVEsSUFBSSxDQUFDO1VBQXBCLENBQXRCLENBQWpCLEVBQStEO1lBQUMsS0FBQSxFQUFPLENBQUMsQ0FBQyxNQUFNLENBQUM7VUFBakIsQ0FBL0Q7UUFBUDtNQUhMLENBQU4sQ0FORCxFQVdDLE1BQUEsQ0FBTztRQUFDLE9BQUEsRUFBUyxDQUFBLENBQUEsR0FBQTtpQkFBTSxRQUFBLENBQVMsT0FBVCxFQUFrQixDQUFDLENBQUQsQ0FBQSxHQUFBO21CQUFPLENBQUMsQ0FBQyxNQUFGLENBQVMsQ0FBQyxDQUFELENBQUEsR0FBQTtxQkFBTyxDQUFDLENBQUMsRUFBRixLQUFRLElBQUksQ0FBQztZQUFwQixDQUFUO1VBQVAsQ0FBbEI7UUFBTjtNQUFWLENBQVAsRUFBbUYsR0FBbkYsQ0FYRDtJQURELENBQUE7O2VBakJEO0FBSEcsQ0FBSiIsInNvdXJjZXNDb250ZW50IjpbIiMgaHR0cHM6Ly9jb2Rlc2FuZGJveC5pby9zLzB2bWpsbXE5NHY/ZmlsZT0vaW5kZXguanM6MC0yMDk2IFJ5YW4gQ2FybmlhdG8gKGgpXHJcblxyXG4jIEhhciBlaiBmw6V0dCBkZW5uYSBhdHQgZnVuZ2VyYSDDpG4uIERlbiBmeWxsZXIgaW50ZSBww6UgdG9kb3MgbWVkIG55YSB2w6RyZGVuLlxyXG4jIE1hbiBtw6VzdGUgcmVmcmVzaGEgc2lkYW4gZsO2ciBhdHQgc2UgYXR0IGRldCBmdW5nZXJhci5cclxuXHJcbmltcG9ydCB7IGNyZWF0ZVNpZ25hbCwgY3JlYXRlRWZmZWN0IH0gZnJvbSBcImh0dHBzOi8vY2RuLnNreXBhY2suZGV2L3NvbGlkLWpzQDEuMi42XCJcclxuIyBpbXBvcnQgeyByZW5kZXIgfSAgICAgICAgZnJvbSBcImh0dHBzOi8vY2RuLnNreXBhY2suZGV2L3NvbGlkLWpzQDEuMi42L3dlYlwiXHJcbiMgaW1wb3J0IGggICAgICAgICAgICAgICAgIGZyb20gXCJodHRwczovL2Nkbi5za3lwYWNrLmRldi9zb2xpZC1qc0AxLjIuNi9oXCJcclxuaW1wb3J0IHsgY3JlYXRlU3RvcmUgfSAgIGZyb20gXCJodHRwczovL2Nkbi5za3lwYWNrLmRldi9zb2xpZC1qc0AxLjIuNi9zdG9yZVwiXHJcbmltcG9ydCB7IGgzLGlucHV0LGJ1dHRvbixkaXYscjRyLGxvZyB9IGZyb20gXCIvanMvdXRpbHMuanNcIlxyXG5cclxuY3JlYXRlTG9jYWxTdG9yZSA9IChpbml0U3RhdGUpID0+XHJcblx0W3N0YXRlLCBzZXRTdGF0ZV0gPSBjcmVhdGVTdG9yZSBpbml0U3RhdGVcclxuXHRpZiBsb2NhbFN0b3JhZ2UudG9kb3MgdGhlbiBzZXRTdGF0ZSBKU09OLnBhcnNlIGxvY2FsU3RvcmFnZS50b2Rvc1xyXG5cdGNyZWF0ZUVmZmVjdCA9PiBsb2NhbFN0b3JhZ2UudG9kb3MgPSBKU09OLnN0cmluZ2lmeSBzdGF0ZVxyXG5cdFtzdGF0ZSwgc2V0U3RhdGVdXHJcblxyXG5yNHIgPT4gXHJcblx0bG9nICdyNHInXHJcblx0W3N0YXRlLCBzZXRTdGF0ZV0gPSBjcmVhdGVMb2NhbFN0b3JlIHt0b2RvczpbXSwgdGl0bGU6XCJcIiwgaWRDb3VudGVyOjB9XHJcblx0ZGl2IHt9LFxyXG5cdFx0aDMge30sIFwiU2ltcGxlIFRvZG9zIEV4YW1wbGVcIlxyXG5cdFx0aW5wdXQge1xyXG5cdFx0XHR0eXBlOiBcInRleHRcIixcclxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiZW50ZXIgdG9kbyBhbmQgY2xpY2sgK1wiLFxyXG5cdFx0XHR2YWx1ZTogPT4gc3RhdGUudGl0bGUsXHJcblx0XHRcdG9uSW5wdXQ6IChlKSA9PiBzZXRTdGF0ZSBcInRpdGxlXCIsIGUudGFyZ2V0LnZhbHVlXHJcblx0XHR9XHJcblx0XHRidXR0b24ge1xyXG5cdFx0XHRvbkNsaWNrOiA9PlxyXG5cdFx0XHRcdHNldFN0YXRlICgocykgPT4ge1xyXG5cdFx0XHRcdFx0aWRDb3VudGVyOiBzLmlkQ291bnRlciArIDEsXHJcblx0XHRcdFx0XHR0b2RvczogWy4uLnMudG9kb3MsIHtpZDogc3RhdGUuaWRDb3VudGVyLHRpdGxlOiBzdGF0ZS50aXRsZSxkb25lOiBmYWxzZX1dLFxyXG5cdFx0XHRcdFx0dGl0bGU6IFwiXCJcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRcIitcIlxyXG5cdFx0Zm9yIHRvZG8gaW4gc3RhdGUudG9kb3NcclxuXHRcdFx0ZGl2IHt9LFxyXG5cdFx0XHRcdGlucHV0IHtcclxuXHRcdFx0XHRcdHR5cGU6IFwiY2hlY2tib3hcIixcclxuXHRcdFx0XHRcdGNoZWNrZWQ6ID0+IHRvZG8uZG9uZSxcclxuXHRcdFx0XHRcdG9uQ2hhbmdlOiAoZSkgPT4gc2V0U3RhdGUoXCJ0b2Rvc1wiLHN0YXRlLnRvZG9zLmZpbmRJbmRleCgodCkgPT4gdC5pZCA9PSB0b2RvLmlkKSx7ZG9uZTogZS50YXJnZXQuY2hlY2tlZH0pXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlucHV0IHtcclxuXHRcdFx0XHRcdHR5cGU6IFwidGV4dFwiLFxyXG5cdFx0XHRcdFx0dmFsdWU6ID0+IHRvZG8udGl0bGUsXHJcblx0XHRcdFx0XHRvbkNoYW5nZTogKGUpID0+IHNldFN0YXRlKFwidG9kb3NcIixzdGF0ZS50b2Rvcy5maW5kSW5kZXgoKHQpID0+IHQuaWQgPT0gdG9kby5pZCkse3RpdGxlOiBlLnRhcmdldC52YWx1ZX0pXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJ1dHRvbiB7b25DbGljazogKCkgPT4gc2V0U3RhdGUoXCJ0b2Rvc1wiLCAodCkgPT4gdC5maWx0ZXIoKHQpID0+IHQuaWQgIT0gdG9kby5pZCkpfSxcInhcIlxyXG4iXX0=
//# sourceURL=c:\github\2023-012-solidjs-coffee-hyperscript-lab\coffee\sketch2.coffee