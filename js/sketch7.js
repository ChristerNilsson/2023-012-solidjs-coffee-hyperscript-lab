// Generated by CoffeeScript 2.5.1
var KNIGHT, QUEEN, S, click, illegals, knight, knightHops, makeIllegals, makeKnight, makeKnightHops, makeQueens, makeTargets, queen, queens, setIllegals, setKnight, setKnightHops, setQueen, setQueens, setState, setTargets, showPieces, showRects, state, targets,
  indexOf = [].indexOf;

import _ from 'https://cdn.skypack.dev/lodash';

import {
  abs,
  N,
  col,
  row,
  log,
  svg,
  Position,
  range,
  rect,
  text,
  signal,
  effect,
  r4r,
  div,
  g
} from '/js/utils.js';

QUEEN = '♛';

KNIGHT = '♘';

S = 40; // square size

[state, setState] = signal(-1);

[queens, setQueens] = signal([]);

[queen, setQueen] = signal(-1);

[knight, setKnight] = signal(-1);

[illegals, setIllegals] = signal([]);

[targets, setTargets] = signal([]);

[knightHops, setKnightHops] = signal([]);

makeQueens = () => { // anger de rutor som damen kan placeras på
  var c, cx, cy, dx, dy, j, k, len, len1, r, ref, ref1, ref2, res;
  cx = 7; // board center x
  cy = 7; // board center y
  res = [];
  ref = range(N);
  for (j = 0, len = ref.length; j < len; j++) {
    r = ref[j];
    ref1 = range(N);
    for (k = 0, len1 = ref1.length; k < len1; k++) {
      c = ref1[k];
      dx = abs(2 * c - cx);
      dy = abs(2 * r - cy);
      if ((ref2 = dx * dy) !== 3 && ref2 !== 7 && ref2 !== 9 && ref2 !== 15) {
        res.push(c + 8 * r);
      }
    }
  }
  res.sort(function(a, b) {
    return a - b;
  });
  return res;
};

makeIllegals = (queen) => {
  if (queen === -1) {
    return [];
  }
  return _.filter(range(N * N), (i) => {
    var ci, cq, dc, dr, ri, rq;
    ci = col(i);
    ri = row(i);
    cq = col(queen);
    rq = row(queen);
    dc = abs(ci - cq);
    dr = abs(ri - rq);
    return ci === cq || ri === rq || dc === dr;
  });
};

makeTargets = (illegals) => {
  if (illegals === []) {
    return [];
  }
  return range(N * N).filter((i) => {
    return !illegals.includes(i);
  });
};

makeKnight = (targets) => {
  if (targets.length === 64) {
    return -1;
  }
  return targets[0];
};

makeKnightHops = (knight) => {
  var c, c2, dc, dr, index, j, k, len, len1, r, r2, ref, ref1, res;
  if (knight === -1) {
    return [];
  }
  res = [];
  c = col(knight);
  r = row(knight);
  ref = [-2, -1, 1, 2];
  for (j = 0, len = ref.length; j < len; j++) {
    dc = ref[j];
    ref1 = [-2, -1, 1, 2];
    for (k = 0, len1 = ref1.length; k < len1; k++) {
      dr = ref1[k];
      if (abs(dc) === abs(dr)) {
        continue;
      }
      c2 = c + dc;
      r2 = r + dr;
      index = c2 + 8 * r2;
      if (indexOf.call(range(8), c2) >= 0 && indexOf.call(range(8), r2) >= 0 && indexOf.call(targets(), index) >= 0) {
        res.push(index);
      }
    }
  }
  res.sort(function(a, b) {
    return a - b;
  });
  return res;
};

click = function(index) {
  if (state() === 0) {
    if (indexOf.call(queens(), index) >= 0) {
      setQueen(index);
      log('queen', index);
      setIllegals(makeIllegals(queen()));
      log('illegals', illegals());
      setTargets(makeTargets(illegals()));
      log('targets', targets());
      setKnight(() => {
        return makeKnight(targets());
      });
      log('knight', knight());
      setKnightHops(makeKnightHops(knight()));
      log('knightHops', knightHops());
      setState(1);
    } else {
      log('not a valid queen position');
    }
    return;
  }
  if (state() === 1) {
    if (indexOf.call(knightHops(), index) >= 0) {
      setKnight(index);
      setKnightHops(makeKnightHops(knight()));
      return log('knightHops', index, '=>', knightHops());
    } else {
      return log('not a valid knight position');
    }
  }
};

// arr = _.clone toggle() # OBS utan clone så uppfattas det inte som någon uppdatering
// _.set arr,index, not arr[index] # _.set föreslogs av CoPilot!
// setToggle arr
showRects = () => {
  var i, j, len, ref, results;
  ref = range(N * N);
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    results.push(((i) => {
      var c, fill, height, r, width, x, y;
      r = 7 - row(i);
      c = col(i);
      x = S + S * c;
      y = S + S * r;
      width = S;
      height = S;
      fill = ['brown', 'black'][(r + c) % 2];
      return rect({
        x,
        y,
        width,
        height,
        fill,
        onClick: () => {
          return click(i);
        }
      });
    })(i));
  }
  return results;
};

showPieces = (pieces, PIECE) => {
  var c, j, len, piece, r, results, x, y;
  results = [];
  for (j = 0, len = pieces.length; j < len; j++) {
    piece = pieces[j];
    if (piece !== -1) {
      r = 7 - row(piece);
      c = col(piece);
      x = S * (1.5 + c);
      y = S * (1.85 + r);
      results.push(text({
        x,
        y,
        "text-anchor": "middle",
        "font-size": S,
        fill: "white",
        onClick: () => {
          return click(piece);
        }
      }, PIECE));
    } else {
      results.push(void 0);
    }
  }
  return results;
};

setState(0);

setQueens(makeQueens());

log('queens', queens());

r4r(() => { // Har ej förstått varför TVÅ loopar behövs.
  return svg({
    viewBox: "0 0 400 400",
    width: 320,
    height: 320
  }, showRects(), () => {
    if (state() === 0) {
      return showPieces(queens(), QUEEN);
    }
  }, () => {
    if (state() === 1) {
      return showPieces([queen()], QUEEN);
    }
  }, () => {
    if (state() === 1) {
      return showPieces([knight()], KNIGHT);
    }
  });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoNy5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxza2V0Y2g3LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLE1BQUEsRUFBQSxVQUFBLEVBQUEsWUFBQSxFQUFBLFVBQUEsRUFBQSxjQUFBLEVBQUEsVUFBQSxFQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxFQUFBLFdBQUEsRUFBQSxTQUFBLEVBQUEsYUFBQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLFVBQUEsRUFBQSxVQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsRUFBQSxPQUFBO0VBQUE7O0FBQUEsT0FBTyxDQUFQLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLEdBQVI7RUFBWSxDQUFaO0VBQWMsR0FBZDtFQUFrQixHQUFsQjtFQUFzQixHQUF0QjtFQUEwQixHQUExQjtFQUE4QixRQUE5QjtFQUF1QyxLQUF2QztFQUE2QyxJQUE3QztFQUFrRCxJQUFsRDtFQUF1RCxNQUF2RDtFQUE4RCxNQUE5RDtFQUFxRSxHQUFyRTtFQUF5RSxHQUF6RTtFQUE2RSxDQUE3RTtDQUFBLE1BQUE7O0FBRUEsS0FBQSxHQUFROztBQUNSLE1BQUEsR0FBUzs7QUFDVCxDQUFBLEdBQUksR0FMSjs7QUFPQSxDQUFDLEtBQUQsRUFBTyxRQUFQLENBQUEsR0FBbUIsTUFBQSxDQUFPLENBQUMsQ0FBUjs7QUFDbkIsQ0FBQyxNQUFELEVBQVEsU0FBUixDQUFBLEdBQXFCLE1BQUEsQ0FBTyxFQUFQOztBQUNyQixDQUFDLEtBQUQsRUFBTyxRQUFQLENBQUEsR0FBbUIsTUFBQSxDQUFPLENBQUMsQ0FBUjs7QUFDbkIsQ0FBQyxNQUFELEVBQVEsU0FBUixDQUFBLEdBQXFCLE1BQUEsQ0FBTyxDQUFDLENBQVI7O0FBQ3JCLENBQUMsUUFBRCxFQUFXLFdBQVgsQ0FBQSxH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QSxFQUFNLEdBQTlCO0lBQW1DLE1BQUEsRUFBTztFQUExQyxDQUFKLEVBQ0MsU0FBQSxDQUFBLENBREQsRUFFQyxDQUFBLENBQUEsR0FBQTtJQUFHLElBQUcsS0FBQSxDQUFBLENBQUEsS0FBVyxDQUFkO2FBQXFCLFVBQUEsQ0FBVyxNQUFBLENBQUEsQ0FBWCxFQUFvQixLQUFwQixFQUFyQjs7RUFBSCxDQUZELEVBR0MsQ0FBQSxDQUFBLEdBQUE7SUFBRyxJQUFHLEtBQUEsQ0FBQSxDQUFBLEtBQVcsQ0FBZDthQUFxQixVQUFBLENBQVcsQ0FBQyxLQUFBLENBQUEsQ0FBRCxDQUFYLEVBQXFCLEtBQXJCLEVBQXJCOztFQUFILENBSEQsRUFJQyxDQUFBLENBQUEsR0FBQTtJQUFHLElBQUcsS0FBQSxDQUFBLENBQUEsS0FBVyxDQUFkO2FBQXFCLFVBQUEsQ0FBVyxDQUFDLE1BQUEsQ0FBQSxDQUFELENBQVgsRUFBc0IsTUFBdEIsRUFBckI7O0VBQUgsQ0FKRDtBQURHLENBQUoiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdodHRwczovL2Nkbi5za3lwYWNrLmRldi9sb2Rhc2gnXHJcbmltcG9ydCB7YWJzLE4sY29sLHJvdyxsb2csc3ZnLFBvc2l0aW9uLHJhbmdlLHJlY3QsdGV4dCxzaWduYWwsZWZmZWN0LHI0cixkaXYsZ30gZnJvbSAnL2pzL3V0aWxzLmpzJ1xyXG5cclxuUVVFRU4gPSAn4pmbJ1xyXG5LTklHSFQgPSAn4pmYJ1xyXG5TID0gNDAgIyBzcXVhcmUgc2l6ZVxyXG5cclxuW3N0YXRlLHNldFN0YXRlXSA9IHNpZ25hbCAtMVxyXG5bcXVlZW5zLHNldFF1ZWVuc10gPSBzaWduYWwgW11cclxuW3F1ZWVuLHNldFF1ZWVuXSA9IHNpZ25hbCAtMVxyXG5ba25pZ2h0LHNldEtuaWdodF0gPSBzaWduYWwgLTFcclxuW2lsbGVnYWxzLCBzZXRJbGxlZ2Fsc10gPSBzaWduYWwgW11cclxuW3RhcmdldHMsIHNldFRhcmdldHNdID0gc2lnbmFsIFtdXHJcbltrbmlnaHRIb3BzLCBzZXRLbmlnaHRIb3BzXSA9IHNpZ25hbCBbXVxyXG5cclxubWFrZVF1ZWVucyA9ID0+ICMgYW5nZXIgZGUgcnV0b3Igc29tIGRhbWVuIGthbiBwbGFjZXJhcyBww6VcclxuXHRjeCA9IDcgIyBib2FyZCBjZW50ZXIgeFxyXG5cdGN5ID0gNyAjIGJvYXJkIGNlbnRlciB5XHJcblx0cmVzID0gW11cclxuXHRmb3IgciBpbiByYW5nZSBOXHJcblx0XHRmb3IgYyBpbiByYW5nZSBOXHJcblx0XHRcdGR4ID0gYWJzIDIqYyAtIGN4XHJcblx0XHRcdGR5ID0gYWJzIDIqciAtIGN5XHJcblx0XHRcdGlmIGR4ICogZHkgbm90IGluIFszLDcsOSwxNV0gdGhlbiByZXMucHVzaCBjKzgqclxyXG5cdHJlcy5zb3J0IChhLGIpIC0+IGEtYlxyXG5cdHJlc1xyXG5cclxubWFrZUlsbGVnYWxzID0gKHF1ZWVuKSA9PlxyXG5cdGlmIHF1ZWVuPT0tMSB0aGVuIHJldHVybiBbXVxyXG5cdF8uZmlsdGVyIHJhbmdlKE4qTiksIChpKSA9PlxyXG5cdFx0Y2kgPSBjb2wgaVxyXG5cdFx0cmkgPSByb3cgaVxyXG5cdFx0Y3EgPSBjb2wgcXVlZW5cclxuXHRcdHJxID0gcm93IHF1ZWVuXHJcblx0XHRkYyA9IGFicyBjaSAtIGNxXHJcblx0XHRkciA9IGFicyByaSAtIHJxXHJcblx0XHRjaSA9PSBjcSBvciByaSA9PSBycSBvciBkYyA9PSBkclxyXG5cclxubWFrZVRhcmdldHMgPSAoaWxsZWdhbHMpPT5cclxuXHRpZiBpbGxlZ2Fscz09W10gdGhlbiByZXR1cm4gW11cclxuXHRyYW5nZShOKk4pLmZpbHRlciAoaSkgPT4gbm90IGlsbGVnYWxzLmluY2x1ZGVzIGlcclxuXHJcbm1ha2VLbmlnaHQgPSAodGFyZ2V0cykgPT5cclxuXHRpZiB0YXJnZXRzLmxlbmd0aD09NjQgdGhlbiByZXR1cm4gLTFcclxuXHR0YXJnZXRzWzBdXHJcblxyXG5tYWtlS25pZ2h0SG9wcyA9IChrbmlnaHQpID0+XHJcblx0aWYga25pZ2h0PT0tMSB0aGVuIHJldHVybiBbXVxyXG5cdHJlcyA9IFtdXHJcblx0YyA9IGNvbCBrbmlnaHRcclxuXHRyID0gcm93IGtuaWdodFxyXG5cdGZvciBkYyBpbiBbLTIsLTEsMSwyXVxyXG5cdFx0Zm9yIGRyIGluIFstMiwtMSwxLDJdXHJcblx0XHRcdGlmIGFicyhkYykgPT0gYWJzKGRyKSB0aGVuIGNvbnRpbnVlXHJcblx0XHRcdGMyID0gYyArIGRjXHJcblx0XHRcdHIyID0gciArIGRyXHJcblx0XHRcdGluZGV4ID0gYzIrOCpyMlxyXG5cdFx0XHRpZiBjMiBpbiByYW5nZSg4KSBhbmQgcjIgaW4gcmFuZ2UoOCkgYW5kIGluZGV4IGluIHRhcmdldHMoKVxyXG5cdFx0XHRcdHJlcy5wdXNoIGluZGV4XHJcblx0cmVzLnNvcnQgKGEsYikgLT4gYS1iXHJcblx0cmVzXHJcblxyXG5jbGljayA9IChpbmRleCkgLT5cclxuXHRpZiBzdGF0ZSgpID09IDBcclxuXHRcdGlmIGluZGV4IGluIHF1ZWVucygpXHJcblxyXG5cdFx0XHRzZXRRdWVlbiBpbmRleFxyXG5cdFx0XHRsb2cgJ3F1ZWVuJyxpbmRleFxyXG5cclxuXHRcdFx0c2V0SWxsZWdhbHMgbWFrZUlsbGVnYWxzIHF1ZWVuKClcclxuXHRcdFx0bG9nICdpbGxlZ2FscycsaWxsZWdhbHMoKVxyXG5cclxuXHRcdFx0c2V0VGFyZ2V0cyBtYWtlVGFyZ2V0cyBpbGxlZ2FscygpXHJcblx0XHRcdGxvZyAndGFyZ2V0cycsIHRhcmdldHMoKVxyXG5cclxuXHRcdFx0c2V0S25pZ2h0ID0+IG1ha2VLbmlnaHQgdGFyZ2V0cygpXHJcblx0XHRcdGxvZyAna25pZ2h0Jywga25pZ2h0KClcclxuXHRcdFx0XHJcblx0XHRcdHNldEtuaWdodEhvcHMgbWFrZUtuaWdodEhvcHMga25pZ2h0KClcclxuXHRcdFx0bG9nICdrbmlnaHRIb3BzJywga25pZ2h0SG9wcygpXHJcblxyXG5cdFx0XHRzZXRTdGF0ZSAxXHJcblx0XHRlbHNlIGxvZyAnbm90IGEgdmFsaWQgcXVlZW4gcG9zaXRpb24nXHJcblx0XHRyZXR1cm5cclxuXHRpZiBzdGF0ZSgpID09IDFcclxuXHRcdGlmIGluZGV4IGluIGtuaWdodEhvcHMoKVxyXG5cdFx0XHRzZXRLbmlnaHQgaW5kZXhcclxuXHRcdFx0c2V0S25pZ2h0SG9wcyBtYWtlS25pZ2h0SG9wcyBrbmlnaHQoKVxyXG5cdFx0XHRsb2cgJ2tuaWdodEhvcHMnLCBpbmRleCwgJz0+JyxrbmlnaHRIb3BzKClcclxuXHRcdGVsc2UgbG9nICdub3QgYSB2YWxpZCBrbmlnaHQgcG9zaXRpb24nXHJcblxyXG5cdCMgYXJyID0gXy5jbG9uZSB0b2dnbGUoKSAjIE9CUyB1dGFuIGNsb25lIHPDpSB1cHBmYXR0YXMgZGV0IGludGUgc29tIG7DpWdvbiB1cHBkYXRlcmluZ1xyXG5cdCMgXy5zZXQgYXJyLGluZGV4LCBub3QgYXJyW2luZGV4XSAjIF8uc2V0IGbDtnJlc2xvZ3MgYXYgQ29QaWxvdCFcclxuXHQjIHNldFRvZ2dsZSBhcnJcclxuXHJcbnNob3dSZWN0cyA9ID0+XHJcblx0Zm9yIGkgaW4gcmFuZ2UgTipOXHJcblx0XHRkbyAoaSkgPT5cclxuXHRcdFx0ciA9IDcgLSByb3cgaVxyXG5cdFx0XHRjID0gY29sIGlcclxuXHRcdFx0eCA9IFMgKyBTKmNcclxuXHRcdFx0eSA9IFMgKyBTKnJcclxuXHRcdFx0d2lkdGggPSBTXHJcblx0XHRcdGhlaWdodCA9IFNcclxuXHRcdFx0ZmlsbCA9IFsnYnJvd24nLCdibGFjayddWyhyK2MpICUgMl1cclxuXHRcdFx0cmVjdCB7eCwgeSwgd2lkdGgsIGhlaWdodCwgZmlsbCwgb25DbGljazogPT4gY2xpY2sgaX1cclxuXHJcbnNob3dQaWVjZXMgPSAocGllY2VzLFBJRUNFKSA9PlxyXG5cdGZvciBwaWVjZSBpbiBwaWVjZXNcclxuXHRcdGlmIHBpZWNlICE9IC0xXHJcblx0XHRcdHIgPSA3IC0gcm93IHBpZWNlXHJcblx0XHRcdGMgPSBjb2wgcGllY2VcclxuXHRcdFx0eCA9IFMqKDEuNStjKVxyXG5cdFx0XHR5ID0gUyooMS44NStyKVxyXG5cdFx0XHR0ZXh0IHt4LCB5LCBcInRleHQtYW5jaG9yXCI6XCJtaWRkbGVcIiwgXCJmb250LXNpemVcIjpTLCBmaWxsOlwid2hpdGVcIiwgb25DbGljazogPT4gY2xpY2sgcGllY2V9LCBQSUVDRVxyXG5cclxuc2V0U3RhdGUgMFxyXG5zZXRRdWVlbnMgbWFrZVF1ZWVucygpXHJcbmxvZyAncXVlZW5zJywgIHF1ZWVucygpXHJcblxyXG5yNHIgPT4gIyBIYXIgZWogZsO2cnN0w6V0dCB2YXJmw7ZyIFRWw4UgbG9vcGFyIGJlaMO2dnMuXHJcblx0c3ZnIHt2aWV3Qm94OlwiMCAwIDQwMCA0MDBcIiwgd2lkdGg6MzIwLCBoZWlnaHQ6MzIwfSxcclxuXHRcdHNob3dSZWN0cygpXHJcblx0XHQ9PiBpZiBzdGF0ZSgpID09IDAgdGhlbiBzaG93UGllY2VzIHF1ZWVucygpLFFVRUVOXHJcblx0XHQ9PiBpZiBzdGF0ZSgpID09IDEgdGhlbiBzaG93UGllY2VzIFtxdWVlbigpXSxRVUVFTlxyXG5cdFx0PT4gaWYgc3RhdGUoKSA9PSAxIHRoZW4gc2hvd1BpZWNlcyBba25pZ2h0KCldLEtOSUdIVFxyXG4iXX0=
//# sourceURL=c:\github\2023-012-solidjs-coffee-hyperscript-lab\coffee\sketch7.coffee