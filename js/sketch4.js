// Generated by CoffeeScript 2.5.1
// Inspiration: https://blog.openreplay.com/solid-vs-react-the-fastest-vs-the-most-popular-ui-library/
// Lathund för översättning från Solid JSX till min variant:
// <div a=3 b=4>pelle</div> => div {a:3, b:4},"Pelle"
// 'r4r => App' ersätter 'render(() => <App />, document.getElementById("app"));'
//   (Lägg in id=app i body i index.html)
// saknas en html-kod, skriv in den i utils.js, enligt 'export button = (a...) => h "button", a"'
// ersätt createSignal med signal
// Testkör logiken genom att lägga in anrop till r4r => App i events. 
//   (Rensa med document.body.innerHTML = "" innan varje anrop till r4r => App)
// Använd coffeescripts loopar och if-satser. <For> behövs ej.
// Använd "do" då loopar och events förekommer samtidigt. Annars används loop-variablens sista värde.
// Rensa bort onödiga skräptecken som semikolon, parenteser, måsvingar, </>, och ()
// Till exempel kan man ta bort de sista nio raderna i originalkoden.
// return kan oftast strykas.
// Typer kan tas bort.
var App, setTodos, todos;

import {
  log,
  r4r,
  signal
} from "/js/utils.js";

import {
  input,
  button,
  div,
  b,
  p
} from "/js/utils.js";

// All data måste ligga före App!
// Kan ej få två instanser av App att fungera samtidigt.
[todos, setTodos] = signal([
  {
    id: "1",
    text: "Adam",
    done: false
  },
  {
    id: "2",
    text: "Bertil",
    done: true
  },
  {
    id: "3",
    text: "Cesar",
    done: false
  },
  {
    id: "4",
    text: "David",
    done: true
  }
]);

App = () => {
  var addClick, addTodo, createTodo, doneTodos, inp, onkeydown, removeTodo, setTodoDone, todo, undoneTodos;
  doneTodos = () => {
    return todos().filter((todo) => {
      return todo.done;
    });
  };
  undoneTodos = () => {
    return todos().filter((todo) => {
      return !todo.done;
    });
  };
  createTodo = (text) => {
    return setTodos(() => {
      return [
        ...todos(),
        {
          id: `${Math.random()}`,
          text,
          done: false
        }
      ];
    });
  };
  removeTodo = (id) => {
    return setTodos(todos().filter((todo) => {
      return todo.id !== id;
    }));
  };
  setTodoDone = (id, done) => {
    return setTodos(todos().map((todo) => {
      if (todo.id === id) {
        return {...todo, done};
      } else {
        return todo;
      }
    }));
  };
  addTodo = (s) => {
    if (s) {
      return createTodo(s);
    }
  };
  onkeydown = (event) => {
    if (event.key === "Enter") {
      return addTodo(event.target.value);
    }
  };
  addClick = (event) => {
    return addTodo(inp.value);
  };
  return div({}, inp = input({
    value: "",
    onkeydown
  }), button({
    onClick: addClick
  }, "Add"), p({}, b({}, "Todo"), (function() {
    var i, len, ref, results;
    ref = undoneTodos();
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      todo = ref[i];
      results.push(((todo) => {
        return div({}, button({
          onClick: () => {
            return setTodoDone(todo.id, true);
          }
        }, "Done"), " " + todo.text);
      })(todo));
    }
    return results;
  }).call(this)), p({}, b({}, "Done"), (function() {
    var i, len, ref, results;
    ref = doneTodos();
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      todo = ref[i];
      results.push(((todo) => {
        return div({}, button({
          onClick: () => {
            return removeTodo(todo.id);
          }
        }, "Remove"), button({
          onClick: () => {
            return setTodoDone(todo.id, false);
          }
        }, "Undo"), " " + todo.text);
      })(todo));
    }
    return results;
  }).call(this)));
};

r4r(() => {
  return App;
});

// Originalkod (85 rader):

// import { For, render } from "solid-js/web";
// import { createMemo, createSignal } from "solid-js";

// interface TODO {
//     id: string;
//     text: string;
//     done: boolean;
// }

// const App = () => {
//     const [todos, setTodos] = createSignal<TODO[]>([]);
//     const [input, setInput] = createSignal("");
//     const doneTodos = createMemo(() => todos().filter((todo) => todo.done));
//     const undoneTodos = createMemo(() => todos().filter((todo) => !todo.done));
//     const createTodo = (text: string) => {
//     setTodos([...todos(), { id: `${Math.random()}`, text, done: false }]);
//     };
//     const removeTodo = (todoId: string) => {
//     setTodos(todos().filter((todo) => todo.id !== todoId));
//     };
//     const setTodoDone = (todoId: string, done: boolean) => {
//     setTodos(
//         todos().map((todo) => {
//         if (todo.id === todoId) {
//             return { ...todo, done };
//         }
//         return todo;
//         })
//     );
//     };
//     const addTodo = () => {
//     const currentInput = input();
//     if (currentInput) {
//         createTodo(currentInput);
//         setInput("");
//     }
//     };
//     const onInput = (event: InputEvent) => {
//     const target = event.target as HTMLInputElement;

//     setInput(target.value);
//     };
//     const onKeydown = (event: KeyboardEvent) => {
//     if (event.key === "Enter") {
//         addTodo();
//     }
//     };

//     return (
//     <div>
//         <input value={input()} onInput={onInput} onKeyDown={onKeydown} />
//         <button onClick={addTodo}>Add</button>
//         <div>
//         <b>Todo:</b>
//         <For each={undoneTodos()}>
//             {(todo) => {
//             return (
//                 <div>
//                 {todo.text}
//                 <button onClick={() => setTodoDone(todo.id, true)}>Done</button>
//                 </div>
//             );
//             }}
//         </For>
//         </div>
//         <div>
//         <b>Done:</b>
//         <For each={doneTodos()}>
//             {(todo) => {
//             return (
//                 <div>
//                 {todo.text}
//                 <button onClick={() => removeTodo(todo.id)}>Remove</button>
//                 <button onClick={() => setTodoDone(todo.id, false)}>
//                     Undo
//                 </button>
//                 </div>
//             );
//             }}
//         </For>
//         </div>
//     </div>
//     );
// };

// render(() => <App />, document.getElementById("app"));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoNC5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxza2V0Y2g0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBY3FCOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLEdBQUEsRUFBQSxRQUFBLEVBQUE7O0FBRXJCLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixNQUFoQjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLEtBQVI7RUFBYyxNQUFkO0VBQXFCLEdBQXJCO0VBQXlCLENBQXpCO0VBQTJCLENBQTNCO0NBQUEsTUFBQSxlQUhxQjs7OztBQU9yQixDQUFDLEtBQUQsRUFBUSxRQUFSLENBQUEsR0FBb0IsTUFBQSxDQUFPO0VBQzFCO0lBQUMsRUFBQSxFQUFJLEdBQUw7SUFBVSxJQUFBLEVBQU0sTUFBaEI7SUFBd0IsSUFBQSxFQUFNO0VBQTlCLENBRDBCO0VBRTFCO0lBQUMsRUFBQSxFQUFJLEdBQUw7SUFBVSxJQUFBLEVBQU0sUUFBaEI7SUFBMEIsSUFBQSxFQUFNO0VBQWhDLENBRjBCO0VBRzFCO0lBQUMsRUFBQSxFQUFJLEdBQUw7SUFBVSxJQUFBLEVBQU0sT0FBaEI7SUFBeUIsSUFBQSxFQUFNO0VBQS9CLENBSDBCO0VBSTFCO0lBQUMsRUFBQSxFQUFJLEdBQUw7SUFBVSxJQUFBLEVBQU0sT0FBaEI7SUFBeUIsSUFBQSxFQUFNO0VBQS9CLENBSjBCO0NBQVA7O0FBT3BCLEdBQUEsR0FBTSxDQUFBLENBQUEsR0FBQTtBQUVOLE1BQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxVQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsVUFBQSxFQUFBLFdBQUEsRUFBQSxJQUFBLEVBQUE7RUFBQyxTQUFBLEdBQWUsQ0FBQSxDQUFBLEdBQUE7V0FBRyxLQUFBLENBQUEsQ0FBTyxDQUFDLE1BQVIsQ0FBZSxDQUFDLElBQUQsQ0FBQSxHQUFBO2FBQVcsSUFBSSxDQUFDO0lBQWhCLENBQWY7RUFB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QyxFQUFqQixFQUFxQixLQUFyQjtVQUFIO1FBQVYsQ0FBUCxFQUFpRCxNQUFqRCxDQUZZLEVBR1osR0FBQSxHQUFNLElBQUksQ0FBQyxJQUhDO01BQVYsQ0FBQSxFQUFDO0lBREwsQ0FBQTs7ZUFGRCxDQVREO0FBYks7O0FBNkJOLEdBQUEsQ0FBSSxDQUFBLENBQUEsR0FBQTtTQUFHO0FBQUgsQ0FBSjs7QUEzQ3FCIiwic291cmNlc0NvbnRlbnQiOlsiIyBJbnNwaXJhdGlvbjogaHR0cHM6Ly9ibG9nLm9wZW5yZXBsYXkuY29tL3NvbGlkLXZzLXJlYWN0LXRoZS1mYXN0ZXN0LXZzLXRoZS1tb3N0LXBvcHVsYXItdWktbGlicmFyeS9cclxuIyBMYXRodW5kIGbDtnIgw7Z2ZXJzw6R0dG5pbmcgZnLDpW4gU29saWQgSlNYIHRpbGwgbWluIHZhcmlhbnQ6XHJcbiMgPGRpdiBhPTMgYj00PnBlbGxlPC9kaXY+ID0+IGRpdiB7YTozLCBiOjR9LFwiUGVsbGVcIlxyXG4jICdyNHIgPT4gQXBwJyBlcnPDpHR0ZXIgJ3JlbmRlcigoKSA9PiA8QXBwIC8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKSk7J1xyXG4jICAgKEzDpGdnIGluIGlkPWFwcCBpIGJvZHkgaSBpbmRleC5odG1sKVxyXG4jIHNha25hcyBlbiBodG1sLWtvZCwgc2tyaXYgaW4gZGVuIGkgdXRpbHMuanMsIGVubGlndCAnZXhwb3J0IGJ1dHRvbiA9IChhLi4uKSA9PiBoIFwiYnV0dG9uXCIsIGFcIidcclxuIyBlcnPDpHR0IGNyZWF0ZVNpZ25hbCBtZWQgc2lnbmFsXHJcbiMgVGVzdGvDtnIgbG9naWtlbiBnZW5vbSBhdHQgbMOkZ2dhIGluIGFucm9wIHRpbGwgcjRyID0+IEFwcCBpIGV2ZW50cy4gXHJcbiMgICAoUmVuc2EgbWVkIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gXCJcIiBpbm5hbiB2YXJqZSBhbnJvcCB0aWxsIHI0ciA9PiBBcHApXHJcbiMgQW52w6RuZCBjb2ZmZWVzY3JpcHRzIGxvb3BhciBvY2ggaWYtc2F0c2VyLiA8Rm9yPiBiZWjDtnZzIGVqLlxyXG4jIEFudsOkbmQgXCJkb1wiIGTDpSBsb29wYXIgb2NoIGV2ZW50cyBmw7ZyZWtvbW1lciBzYW10aWRpZ3QuIEFubmFycyBhbnbDpG5kcyBsb29wLXZhcmlhYmxlbnMgc2lzdGEgdsOkcmRlLlxyXG4jIFJlbnNhIGJvcnQgb27DtmRpZ2Egc2tyw6RwdGVja2VuIHNvbSBzZW1pa29sb24sIHBhcmVudGVzZXIsIG3DpXN2aW5nYXIsIDwvPiwgb2NoICgpXHJcbiMgVGlsbCBleGVtcGVsIGthbiBtYW4gdGEgYm9ydCBkZSBzaXN0YSBuaW8gcmFkZXJuYSBpIG9yaWdpbmFsa29kZW4uXHJcbiMgcmV0dXJuIGthbiBvZnRhc3Qgc3RyeWthcy5cclxuIyBUeXBlciBrYW4gdGFzIGJvcnQuXHJcblxyXG5pbXBvcnQge2xvZyxyNHIsc2lnbmFsfSBmcm9tIFwiL2pzL3V0aWxzLmpzXCJcclxuaW1wb3J0IHtpbnB1dCxidXR0b24sZGl2LGIscH0gZnJvbSBcIi9qcy91dGlscy5qc1wiXHJcblxyXG4jIEFsbCBkYXRhIG3DpXN0ZSBsaWdnYSBmw7ZyZSBBcHAhXHJcbiMgS2FuIGVqIGbDpSB0dsOlIGluc3RhbnNlciBhdiBBcHAgYXR0IGZ1bmdlcmEgc2FtdGlkaWd0LlxyXG5bdG9kb3MsIHNldFRvZG9zXSA9IHNpZ25hbCBbXHJcblx0e2lkOiBcIjFcIiwgdGV4dDogXCJBZGFtXCIsIGRvbmU6IGZhbHNlfSxcclxuXHR7aWQ6IFwiMlwiLCB0ZXh0OiBcIkJlcnRpbFwiLCBkb25lOiB0cnVlfSxcclxuXHR7aWQ6IFwiM1wiLCB0ZXh0OiBcIkNlc2FyXCIsIGRvbmU6IGZhbHNlfSxcclxuXHR7aWQ6IFwiNFwiLCB0ZXh0OiBcIkRhdmlkXCIsIGRvbmU6IHRydWV9LFxyXG5dXHJcblxyXG5BcHAgPSA9PlxyXG5cclxuXHRkb25lVG9kb3MgICA9ICA9PiB0b2RvcygpLmZpbHRlciAodG9kbykgPT4gIHRvZG8uZG9uZVxyXG5cdHVuZG9uZVRvZG9zID0gID0+IHRvZG9zKCkuZmlsdGVyICh0b2RvKSA9PiAhdG9kby5kb25lXHJcblxyXG5cdGNyZWF0ZVRvZG8gPSAodGV4dCkgPT4gc2V0VG9kb3MgPT4gWy4uLnRvZG9zKCksIHsgaWQ6IFwiI3tNYXRoLnJhbmRvbSgpfVwiLCB0ZXh0LCBkb25lOiBmYWxzZSB9XVxyXG5cdHJlbW92ZVRvZG8gPSAoaWQpID0+IHNldFRvZG9zIHRvZG9zKCkuZmlsdGVyICh0b2RvKSA9PiB0b2RvLmlkICE9IGlkXHJcblx0c2V0VG9kb0RvbmUgPSAoaWQsIGRvbmUpID0+IHNldFRvZG9zIHRvZG9zKCkubWFwICh0b2RvKSA9PiBpZiB0b2RvLmlkID09IGlkIHRoZW4geyAuLi50b2RvLCBkb25lIH0gZWxzZSB0b2RvXHJcblxyXG5cdGFkZFRvZG8gPSAocykgPT4gaWYgcyB0aGVuIGNyZWF0ZVRvZG8gc1xyXG5cdG9ua2V5ZG93biA9IChldmVudCkgPT4gaWYgZXZlbnQua2V5ID09IFwiRW50ZXJcIiB0aGVuIGFkZFRvZG8gZXZlbnQudGFyZ2V0LnZhbHVlXHJcblx0YWRkQ2xpY2sgPSAoZXZlbnQpID0+IGFkZFRvZG8gaW5wLnZhbHVlXHJcblx0XHJcblx0ZGl2IHt9LFxyXG5cdFx0aW5wID0gaW5wdXQge3ZhbHVlOiBcIlwiLCBvbmtleWRvd259XHJcblx0XHRidXR0b24ge29uQ2xpY2s6IGFkZENsaWNrfSwgXCJBZGRcIlxyXG5cdFx0cCB7fSxcclxuXHRcdFx0YiB7fSwgXCJUb2RvXCJcclxuXHRcdFx0Zm9yIHRvZG8gaW4gdW5kb25lVG9kb3MoKVxyXG5cdFx0XHRcdGRvICh0b2RvKSA9PiBkaXYge30sXHJcblx0XHRcdFx0XHRidXR0b24ge29uQ2xpY2s6ID0+IHNldFRvZG9Eb25lIHRvZG8uaWQsIHRydWV9LCBcIkRvbmVcIlxyXG5cdFx0XHRcdFx0XCIgXCIgKyB0b2RvLnRleHRcclxuXHRcdHAge30sXHJcblx0XHRcdGIge30sIFwiRG9uZVwiXHJcblx0XHRcdGZvciB0b2RvIGluIGRvbmVUb2RvcygpXHJcblx0XHRcdFx0ZG8gKHRvZG8pID0+IGRpdiB7fSxcclxuXHRcdFx0XHRcdGJ1dHRvbiB7b25DbGljazogPT4gcmVtb3ZlVG9kbyB0b2RvLmlkfSwgXCJSZW1vdmVcIlxyXG5cdFx0XHRcdFx0YnV0dG9uIHtvbkNsaWNrOiA9PiBzZXRUb2RvRG9uZSB0b2RvLmlkLCBmYWxzZX0sIFwiVW5kb1wiXHJcblx0XHRcdFx0XHRcIiBcIiArIHRvZG8udGV4dFxyXG5yNHIgPT4gQXBwXHJcblxyXG4jIE9yaWdpbmFsa29kICg4NSByYWRlcik6XHJcblxyXG4jIGltcG9ydCB7IEZvciwgcmVuZGVyIH0gZnJvbSBcInNvbGlkLWpzL3dlYlwiO1xyXG4jIGltcG9ydCB7IGNyZWF0ZU1lbW8sIGNyZWF0ZVNpZ25hbCB9IGZyb20gXCJzb2xpZC1qc1wiO1xyXG5cclxuIyBpbnRlcmZhY2UgVE9ETyB7XHJcbiMgICAgIGlkOiBzdHJpbmc7XHJcbiMgICAgIHRleHQ6IHN0cmluZztcclxuIyAgICAgZG9uZTogYm9vbGVhbjtcclxuIyB9XHJcblxyXG4jIGNvbnN0IEFwcCA9ICgpID0+IHtcclxuIyAgICAgY29uc3QgW3RvZG9zLCBzZXRUb2Rvc10gPSBjcmVhdGVTaWduYWw8VE9ET1tdPihbXSk7XHJcbiMgICAgIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gY3JlYXRlU2lnbmFsKFwiXCIpO1xyXG4jICAgICBjb25zdCBkb25lVG9kb3MgPSBjcmVhdGVNZW1vKCgpID0+IHRvZG9zKCkuZmlsdGVyKCh0b2RvKSA9PiB0b2RvLmRvbmUpKTtcclxuIyAgICAgY29uc3QgdW5kb25lVG9kb3MgPSBjcmVhdGVNZW1vKCgpID0+IHRvZG9zKCkuZmlsdGVyKCh0b2RvKSA9PiAhdG9kby5kb25lKSk7XHJcbiMgICAgIGNvbnN0IGNyZWF0ZVRvZG8gPSAodGV4dDogc3RyaW5nKSA9PiB7XHJcbiMgICAgIHNldFRvZG9zKFsuLi50b2RvcygpLCB7IGlkOiBgJHtNYXRoLnJhbmRvbSgpfWAsIHRleHQsIGRvbmU6IGZhbHNlIH1dKTtcclxuIyAgICAgfTtcclxuIyAgICAgY29uc3QgcmVtb3ZlVG9kbyA9ICh0b2RvSWQ6IHN0cmluZykgPT4ge1xyXG4jICAgICBzZXRUb2Rvcyh0b2RvcygpLmZpbHRlcigodG9kbykgPT4gdG9kby5pZCAhPT0gdG9kb0lkKSk7XHJcbiMgICAgIH07XHJcbiMgICAgIGNvbnN0IHNldFRvZG9Eb25lID0gKHRvZG9JZDogc3RyaW5nLCBkb25lOiBib29sZWFuKSA9PiB7XHJcbiMgICAgIHNldFRvZG9zKFxyXG4jICAgICAgICAgdG9kb3MoKS5tYXAoKHRvZG8pID0+IHtcclxuIyAgICAgICAgIGlmICh0b2RvLmlkID09PSB0b2RvSWQpIHtcclxuIyAgICAgICAgICAgICByZXR1cm4geyAuLi50b2RvLCBkb25lIH07XHJcbiMgICAgICAgICB9XHJcbiMgICAgICAgICByZXR1cm4gdG9kbztcclxuIyAgICAgICAgIH0pXHJcbiMgICAgICk7XHJcbiMgICAgIH07XHJcbiMgICAgIGNvbnN0IGFkZFRvZG8gPSAoKSA9PiB7XHJcbiMgICAgIGNvbnN0IGN1cnJlbnRJbnB1dCA9IGlucHV0KCk7XHJcbiMgICAgIGlmIChjdXJyZW50SW5wdXQpIHtcclxuIyAgICAgICAgIGNyZWF0ZVRvZG8oY3VycmVudElucHV0KTtcclxuIyAgICAgICAgIHNldElucHV0KFwiXCIpO1xyXG4jICAgICB9XHJcbiMgICAgIH07XHJcbiMgICAgIGNvbnN0IG9uSW5wdXQgPSAoZXZlbnQ6IElucHV0RXZlbnQpID0+IHtcclxuIyAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4jICAgICBzZXRJbnB1dCh0YXJnZXQudmFsdWUpO1xyXG4jICAgICB9O1xyXG4jICAgICBjb25zdCBvbktleWRvd24gPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuIyAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiMgICAgICAgICBhZGRUb2RvKCk7XHJcbiMgICAgIH1cclxuIyAgICAgfTtcclxuXHJcbiMgICAgIHJldHVybiAoXHJcbiMgICAgIDxkaXY+XHJcbiMgICAgICAgICA8aW5wdXQgdmFsdWU9e2lucHV0KCl9IG9uSW5wdXQ9e29uSW5wdXR9IG9uS2V5RG93bj17b25LZXlkb3dufSAvPlxyXG4jICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXthZGRUb2RvfT5BZGQ8L2J1dHRvbj5cclxuIyAgICAgICAgIDxkaXY+XHJcbiMgICAgICAgICA8Yj5Ub2RvOjwvYj5cclxuIyAgICAgICAgIDxGb3IgZWFjaD17dW5kb25lVG9kb3MoKX0+XHJcbiMgICAgICAgICAgICAgeyh0b2RvKSA9PiB7XHJcbiMgICAgICAgICAgICAgcmV0dXJuIChcclxuIyAgICAgICAgICAgICAgICAgPGRpdj5cclxuIyAgICAgICAgICAgICAgICAge3RvZG8udGV4dH1cclxuIyAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRUb2RvRG9uZSh0b2RvLmlkLCB0cnVlKX0+RG9uZTwvYnV0dG9uPlxyXG4jICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuIyAgICAgICAgICAgICApO1xyXG4jICAgICAgICAgICAgIH19XHJcbiMgICAgICAgICA8L0Zvcj5cclxuIyAgICAgICAgIDwvZGl2PlxyXG4jICAgICAgICAgPGRpdj5cclxuIyAgICAgICAgIDxiPkRvbmU6PC9iPlxyXG4jICAgICAgICAgPEZvciBlYWNoPXtkb25lVG9kb3MoKX0+XHJcbiMgICAgICAgICAgICAgeyh0b2RvKSA9PiB7XHJcbiMgICAgICAgICAgICAgcmV0dXJuIChcclxuIyAgICAgICAgICAgICAgICAgPGRpdj5cclxuIyAgICAgICAgICAgICAgICAge3RvZG8udGV4dH1cclxuIyAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiByZW1vdmVUb2RvKHRvZG8uaWQpfT5SZW1vdmU8L2J1dHRvbj5cclxuIyAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRUb2RvRG9uZSh0b2RvLmlkLCBmYWxzZSl9PlxyXG4jICAgICAgICAgICAgICAgICAgICAgVW5kb1xyXG4jICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuIyAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiMgICAgICAgICAgICAgKTtcclxuIyAgICAgICAgICAgICB9fVxyXG4jICAgICAgICAgPC9Gb3I+XHJcbiMgICAgICAgICA8L2Rpdj5cclxuIyAgICAgPC9kaXY+XHJcbiMgICAgICk7XHJcbiMgfTtcclxuXHJcbiMgcmVuZGVyKCgpID0+IDxBcHAgLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXBwXCIpKTsiXX0=
//# sourceURL=c:\github\2023-012-solidjs-coffee-hyperscript-lab\coffee\sketch4.coffee