// Generated by CoffeeScript 2.5.1
// Inspiration: https://blog.openreplay.com/solid-vs-react-the-fastest-vs-the-most-popular-ui-library/
// Lathund för översättning från Solid JSX till min variant:
// <div a=3 b=4>pelle</div> => div {a:3, b:4},"Pelle"
// 'r4r => App' ersätter 'render(() => <App />, document.getElementById("app"));'
//   (Lägg in id=app i body i index.html)
// saknas en html-kod, skriv in den i utils.js, enligt 'export button = (a...) => h "button", a"'
// ersätt createSignal med signal
// Testkör logiken genom att lägga in anrop till r4r => App i events. 
//   (Rensa med document.body.innerHTML = "" innan varje anrop till r4r => App)
// Använd coffeescripts loopar och if-satser. <For> behövs ej.
// Använd "do" då loopar och events förekommer samtidigt. Annars används loop-variablens sista värde.
// Rensa bort onödiga skräptecken som semikolon, parenteser, måsvingar, </>, och ()
// Till exempel kan man ta bort de sista nio raderna i originalkoden.
// return kan oftast strykas.
// Typer kan tas bort.
var App, setTodos, todos;

import {
  log,
  r4r,
  signal
} from "/js/utils.js";

import {
  input,
  button,
  div,
  b,
  p
} from "/js/utils.js";

// All data måste ligga före App!
[todos, setTodos] = signal([
  {
    id: "1",
    text: "Adam",
    done: false
  },
  {
    id: "2",
    text: "Bertil",
    done: true
  },
  {
    id: "3",
    text: "Cesar",
    done: false
  },
  {
    id: "4",
    text: "David",
    done: true
  }
]);

App = () => {
  var addClick, addTodo, createTodo, doneTodos, inp, onkeydown, removeTodo, setTodoDone, todo, undoneTodos;
  doneTodos = () => {
    return todos().filter((todo) => {
      return todo.done;
    });
  };
  undoneTodos = () => {
    return todos().filter((todo) => {
      return !todo.done;
    });
  };
  createTodo = (text) => {
    return setTodos(() => {
      return [
        ...todos(),
        {
          id: `${Math.random()}`,
          text,
          done: false
        }
      ];
    });
  };
  removeTodo = (id) => {
    return setTodos(todos().filter((todo) => {
      return todo.id !== id;
    }));
  };
  setTodoDone = (id, done) => {
    return setTodos(todos().map((todo) => {
      if (todo.id === id) {
        return {...todo, done};
      } else {
        return todo;
      }
    }));
  };
  addTodo = (s) => {
    if (s) {
      return createTodo(s);
    }
  };
  onkeydown = (event) => {
    if (event.key === "Enter") {
      return addTodo(event.target.value);
    }
  };
  addClick = (event) => {
    return addTodo(inp.value);
  };
  return div({}, inp = input({
    value: "",
    onkeydown
  }), button({
    onClick: addClick
  }, "Add"), p({}, b({}, "Todo"), (function() {
    var i, len, ref, results;
    ref = undoneTodos();
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      todo = ref[i];
      results.push(((todo) => {
        return div({}, button({
          onClick: () => {
            return setTodoDone(todo.id, true);
          }
        }, "Done"), " " + todo.text);
      })(todo));
    }
    return results;
  }).call(this)), p({}, b({}, "Done"), (function() {
    var i, len, ref, results;
    ref = doneTodos();
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      todo = ref[i];
      results.push(((todo) => {
        return div({}, button({
          onClick: () => {
            return removeTodo(todo.id);
          }
        }, "Remove"), button({
          onClick: () => {
            return setTodoDone(todo.id, false);
          }
        }, "Undo"), " " + todo.text);
      })(todo));
    }
    return results;
  }).call(this)));
};

r4r(() => {
  return App;
});

// Originalkod (85 rader):

// import { For, render } from "solid-js/web";
// import { createMemo, createSignal } from "solid-js";

// interface TODO {
//     id: string;
//     text: string;
//     done: boolean;
// }

// const App = () => {
//     const [todos, setTodos] = createSignal<TODO[]>([]);
//     const [input, setInput] = createSignal("");
//     const doneTodos = createMemo(() => todos().filter((todo) => todo.done));
//     const undoneTodos = createMemo(() => todos().filter((todo) => !todo.done));
//     const createTodo = (text: string) => {
//     setTodos([...todos(), { id: `${Math.random()}`, text, done: false }]);
//     };
//     const removeTodo = (todoId: string) => {
//     setTodos(todos().filter((todo) => todo.id !== todoId));
//     };
//     const setTodoDone = (todoId: string, done: boolean) => {
//     setTodos(
//         todos().map((todo) => {
//         if (todo.id === todoId) {
//             return { ...todo, done };
//         }
//         return todo;
//         })
//     );
//     };
//     const addTodo = () => {
//     const currentInput = input();
//     if (currentInput) {
//         createTodo(currentInput);
//         setInput("");
//     }
//     };
//     const onInput = (event: InputEvent) => {
//     const target = event.target as HTMLInputElement;

//     setInput(target.value);
//     };
//     const onKeydown = (event: KeyboardEvent) => {
//     if (event.key === "Enter") {
//         addTodo();
//     }
//     };

//     return (
//     <div>
//         <input value={input()} onInput={onInput} onKeyDown={onKeydown} />
//         <button onClick={addTodo}>Add</button>
//         <div>
//         <b>Todo:</b>
//         <For each={undoneTodos()}>
//             {(todo) => {
//             return (
//                 <div>
//                 {todo.text}
//                 <button onClick={() => setTodoDone(todo.id, true)}>Done</button>
//                 </div>
//             );
//             }}
//         </For>
//         </div>
//         <div>
//         <b>Done:</b>
//         <For each={doneTodos()}>
//             {(todo) => {
//             return (
//                 <div>
//                 {todo.text}
//                 <button onClick={() => removeTodo(todo.id)}>Remove</button>
//                 <button onClick={() => setTodoDone(todo.id, false)}>
//                     Undo
//                 </button>
//                 </div>
//             );
//             }}
//         </For>
//         </div>
//     </div>
//     );
// };

// render(() => <App />, document.getElementById("app"));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoNC5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxza2V0Y2g0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBY3FCOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLEdBQUEsRUFBQSxRQUFBLEVBQUE7O0FBRXJCLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixNQUFoQjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLEtBQVI7RUFBYyxNQUFkO0VBQXFCLEdBQXJCO0VBQXlCLENBQXpCO0VBQTJCLENBQTNCO0NBQUEsTUFBQSxlQUhxQjs7O0FBTXJCLENBQUMsS0FBRCxFQUFRLFFBQVIsQ0FBQSxHQUFvQixNQUFBLENBQU87RUFDMUI7SUFBQyxFQUFBLEVBQUksR0FBTDtJQUFVLElBQUEsRUFBTSxNQUFoQjtJQUF3QixJQUFBLEVBQU07RUFBOUIsQ0FEMEI7RUFFMUI7SUFBQyxFQUFBLEVBQUksR0FBTDtJQUFVLElBQUEsRUFBTSxRQUFoQjtJQUEwQixJQUFBLEVBQU07RUFBaEMsQ0FGMEI7RUFHMUI7SUFBQyxFQUFBLEVBQUksR0FBTDtJQUFVLElBQUEsRUFBTSxPQUFoQjtJQUF5QixJQUFBLEVBQU07RUFBL0IsQ0FIMEI7RUFJMUI7SUFBQyxFQUFBLEVBQUksR0FBTDtJQUFVLElBQUEsRUFBTSxPQUFoQjtJQUF5QixJQUFBLEVBQU07RUFBL0IsQ0FKMEI7Q0FBUDs7QUFPcEIsR0FBQSxHQUFNLENBQUEsQ0FBQSxHQUFBO0FBRU4sTUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLFVBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxVQUFBLEVBQUEsV0FBQSxFQUFBLElBQUEsRUFBQTtFQUFDLFNBQUEsR0FBZSxDQUFBLENBQUEsR0FBQTtXQUFHLEtBQUEsQ0FBQSxDQUFPLENBQUMsTUFBUixDQUFlLENBQUMsSUFBRCxDQUFBLEdBQUE7YUFBVyxJQUFJLENBQUM7SUFBaEIsQ0FBZjtFQUFI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LEVBQWpCLEVBQXFCLEtBQXJCO1VBQUg7UUFBVixDQUFQLEVBQWlELE1BQWpELENBRlksRUFHWixHQUFBLEdBQU0sSUFBSSxDQUFDLElBSEM7TUFBVixDQUFBLEVBQUM7SUFETCxDQUFBOztlQUZELENBVEQ7QUFiSzs7QUE2Qk4sR0FBQSxDQUFJLENBQUEsQ0FBQSxHQUFBO1NBQUc7QUFBSCxDQUFKOztBQTFDcUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIEluc3BpcmF0aW9uOiBodHRwczovL2Jsb2cub3BlbnJlcGxheS5jb20vc29saWQtdnMtcmVhY3QtdGhlLWZhc3Rlc3QtdnMtdGhlLW1vc3QtcG9wdWxhci11aS1saWJyYXJ5L1xyXG4jIExhdGh1bmQgZsO2ciDDtnZlcnPDpHR0bmluZyBmcsOlbiBTb2xpZCBKU1ggdGlsbCBtaW4gdmFyaWFudDpcclxuIyA8ZGl2IGE9MyBiPTQ+cGVsbGU8L2Rpdj4gPT4gZGl2IHthOjMsIGI6NH0sXCJQZWxsZVwiXHJcbiMgJ3I0ciA9PiBBcHAnIGVyc8OkdHRlciAncmVuZGVyKCgpID0+IDxBcHAgLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXBwXCIpKTsnXHJcbiMgICAoTMOkZ2cgaW4gaWQ9YXBwIGkgYm9keSBpIGluZGV4Lmh0bWwpXHJcbiMgc2FrbmFzIGVuIGh0bWwta29kLCBza3JpdiBpbiBkZW4gaSB1dGlscy5qcywgZW5saWd0ICdleHBvcnQgYnV0dG9uID0gKGEuLi4pID0+IGggXCJidXR0b25cIiwgYVwiJ1xyXG4jIGVyc8OkdHQgY3JlYXRlU2lnbmFsIG1lZCBzaWduYWxcclxuIyBUZXN0a8O2ciBsb2dpa2VuIGdlbm9tIGF0dCBsw6RnZ2EgaW4gYW5yb3AgdGlsbCByNHIgPT4gQXBwIGkgZXZlbnRzLiBcclxuIyAgIChSZW5zYSBtZWQgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBcIlwiIGlubmFuIHZhcmplIGFucm9wIHRpbGwgcjRyID0+IEFwcClcclxuIyBBbnbDpG5kIGNvZmZlZXNjcmlwdHMgbG9vcGFyIG9jaCBpZi1zYXRzZXIuIDxGb3I+IGJlaMO2dnMgZWouXHJcbiMgQW52w6RuZCBcImRvXCIgZMOlIGxvb3BhciBvY2ggZXZlbnRzIGbDtnJla29tbWVyIHNhbXRpZGlndC4gQW5uYXJzIGFudsOkbmRzIGxvb3AtdmFyaWFibGVucyBzaXN0YSB2w6RyZGUuXHJcbiMgUmVuc2EgYm9ydCBvbsO2ZGlnYSBza3LDpHB0ZWNrZW4gc29tIHNlbWlrb2xvbiwgcGFyZW50ZXNlciwgbcOlc3ZpbmdhciwgPC8+LCBvY2ggKClcclxuIyBUaWxsIGV4ZW1wZWwga2FuIG1hbiB0YSBib3J0IGRlIHNpc3RhIG5pbyByYWRlcm5hIGkgb3JpZ2luYWxrb2Rlbi5cclxuIyByZXR1cm4ga2FuIG9mdGFzdCBzdHJ5a2FzLlxyXG4jIFR5cGVyIGthbiB0YXMgYm9ydC5cclxuXHJcbmltcG9ydCB7bG9nLHI0cixzaWduYWx9IGZyb20gXCIvanMvdXRpbHMuanNcIlxyXG5pbXBvcnQge2lucHV0LGJ1dHRvbixkaXYsYixwfSBmcm9tIFwiL2pzL3V0aWxzLmpzXCJcclxuXHJcbiMgQWxsIGRhdGEgbcOlc3RlIGxpZ2dhIGbDtnJlIEFwcCFcclxuW3RvZG9zLCBzZXRUb2Rvc10gPSBzaWduYWwgW1xyXG5cdHtpZDogXCIxXCIsIHRleHQ6IFwiQWRhbVwiLCBkb25lOiBmYWxzZX0sXHJcblx0e2lkOiBcIjJcIiwgdGV4dDogXCJCZXJ0aWxcIiwgZG9uZTogdHJ1ZX0sXHJcblx0e2lkOiBcIjNcIiwgdGV4dDogXCJDZXNhclwiLCBkb25lOiBmYWxzZX0sXHJcblx0e2lkOiBcIjRcIiwgdGV4dDogXCJEYXZpZFwiLCBkb25lOiB0cnVlfSxcclxuXVxyXG5cclxuQXBwID0gPT5cclxuXHJcblx0ZG9uZVRvZG9zICAgPSAgPT4gdG9kb3MoKS5maWx0ZXIgKHRvZG8pID0+ICB0b2RvLmRvbmVcclxuXHR1bmRvbmVUb2RvcyA9ICA9PiB0b2RvcygpLmZpbHRlciAodG9kbykgPT4gIXRvZG8uZG9uZVxyXG5cclxuXHRjcmVhdGVUb2RvID0gKHRleHQpID0+IHNldFRvZG9zID0+IFsuLi50b2RvcygpLCB7IGlkOiBcIiN7TWF0aC5yYW5kb20oKX1cIiwgdGV4dCwgZG9uZTogZmFsc2UgfV1cclxuXHRyZW1vdmVUb2RvID0gKGlkKSA9PiBzZXRUb2RvcyB0b2RvcygpLmZpbHRlciAodG9kbykgPT4gdG9kby5pZCAhPSBpZFxyXG5cdHNldFRvZG9Eb25lID0gKGlkLCBkb25lKSA9PiBzZXRUb2RvcyB0b2RvcygpLm1hcCAodG9kbykgPT4gaWYgdG9kby5pZCA9PSBpZCB0aGVuIHsgLi4udG9kbywgZG9uZSB9IGVsc2UgdG9kb1xyXG5cclxuXHRhZGRUb2RvID0gKHMpID0+IGlmIHMgdGhlbiBjcmVhdGVUb2RvIHNcclxuXHRvbmtleWRvd24gPSAoZXZlbnQpID0+IGlmIGV2ZW50LmtleSA9PSBcIkVudGVyXCIgdGhlbiBhZGRUb2RvIGV2ZW50LnRhcmdldC52YWx1ZVxyXG5cdGFkZENsaWNrID0gKGV2ZW50KSA9PiBhZGRUb2RvIGlucC52YWx1ZVxyXG5cdFxyXG5cdGRpdiB7fSxcclxuXHRcdGlucCA9IGlucHV0IHt2YWx1ZTogXCJcIiwgb25rZXlkb3dufVxyXG5cdFx0YnV0dG9uIHtvbkNsaWNrOiBhZGRDbGlja30sIFwiQWRkXCJcclxuXHRcdHAge30sXHJcblx0XHRcdGIge30sIFwiVG9kb1wiXHJcblx0XHRcdGZvciB0b2RvIGluIHVuZG9uZVRvZG9zKClcclxuXHRcdFx0XHRkbyAodG9kbykgPT4gZGl2IHt9LFxyXG5cdFx0XHRcdFx0YnV0dG9uIHtvbkNsaWNrOiA9PiBzZXRUb2RvRG9uZSB0b2RvLmlkLCB0cnVlfSwgXCJEb25lXCJcclxuXHRcdFx0XHRcdFwiIFwiICsgdG9kby50ZXh0XHJcblx0XHRwIHt9LFxyXG5cdFx0XHRiIHt9LCBcIkRvbmVcIlxyXG5cdFx0XHRmb3IgdG9kbyBpbiBkb25lVG9kb3MoKVxyXG5cdFx0XHRcdGRvICh0b2RvKSA9PiBkaXYge30sXHJcblx0XHRcdFx0XHRidXR0b24ge29uQ2xpY2s6ID0+IHJlbW92ZVRvZG8gdG9kby5pZH0sIFwiUmVtb3ZlXCJcclxuXHRcdFx0XHRcdGJ1dHRvbiB7b25DbGljazogPT4gc2V0VG9kb0RvbmUgdG9kby5pZCwgZmFsc2V9LCBcIlVuZG9cIlxyXG5cdFx0XHRcdFx0XCIgXCIgKyB0b2RvLnRleHRcclxucjRyID0+IEFwcFxyXG5cclxuIyBPcmlnaW5hbGtvZCAoODUgcmFkZXIpOlxyXG5cclxuIyBpbXBvcnQgeyBGb3IsIHJlbmRlciB9IGZyb20gXCJzb2xpZC1qcy93ZWJcIjtcclxuIyBpbXBvcnQgeyBjcmVhdGVNZW1vLCBjcmVhdGVTaWduYWwgfSBmcm9tIFwic29saWQtanNcIjtcclxuXHJcbiMgaW50ZXJmYWNlIFRPRE8ge1xyXG4jICAgICBpZDogc3RyaW5nO1xyXG4jICAgICB0ZXh0OiBzdHJpbmc7XHJcbiMgICAgIGRvbmU6IGJvb2xlYW47XHJcbiMgfVxyXG5cclxuIyBjb25zdCBBcHAgPSAoKSA9PiB7XHJcbiMgICAgIGNvbnN0IFt0b2Rvcywgc2V0VG9kb3NdID0gY3JlYXRlU2lnbmFsPFRPRE9bXT4oW10pO1xyXG4jICAgICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IGNyZWF0ZVNpZ25hbChcIlwiKTtcclxuIyAgICAgY29uc3QgZG9uZVRvZG9zID0gY3JlYXRlTWVtbygoKSA9PiB0b2RvcygpLmZpbHRlcigodG9kbykgPT4gdG9kby5kb25lKSk7XHJcbiMgICAgIGNvbnN0IHVuZG9uZVRvZG9zID0gY3JlYXRlTWVtbygoKSA9PiB0b2RvcygpLmZpbHRlcigodG9kbykgPT4gIXRvZG8uZG9uZSkpO1xyXG4jICAgICBjb25zdCBjcmVhdGVUb2RvID0gKHRleHQ6IHN0cmluZykgPT4ge1xyXG4jICAgICBzZXRUb2RvcyhbLi4udG9kb3MoKSwgeyBpZDogYCR7TWF0aC5yYW5kb20oKX1gLCB0ZXh0LCBkb25lOiBmYWxzZSB9XSk7XHJcbiMgICAgIH07XHJcbiMgICAgIGNvbnN0IHJlbW92ZVRvZG8gPSAodG9kb0lkOiBzdHJpbmcpID0+IHtcclxuIyAgICAgc2V0VG9kb3ModG9kb3MoKS5maWx0ZXIoKHRvZG8pID0+IHRvZG8uaWQgIT09IHRvZG9JZCkpO1xyXG4jICAgICB9O1xyXG4jICAgICBjb25zdCBzZXRUb2RvRG9uZSA9ICh0b2RvSWQ6IHN0cmluZywgZG9uZTogYm9vbGVhbikgPT4ge1xyXG4jICAgICBzZXRUb2RvcyhcclxuIyAgICAgICAgIHRvZG9zKCkubWFwKCh0b2RvKSA9PiB7XHJcbiMgICAgICAgICBpZiAodG9kby5pZCA9PT0gdG9kb0lkKSB7XHJcbiMgICAgICAgICAgICAgcmV0dXJuIHsgLi4udG9kbywgZG9uZSB9O1xyXG4jICAgICAgICAgfVxyXG4jICAgICAgICAgcmV0dXJuIHRvZG87XHJcbiMgICAgICAgICB9KVxyXG4jICAgICApO1xyXG4jICAgICB9O1xyXG4jICAgICBjb25zdCBhZGRUb2RvID0gKCkgPT4ge1xyXG4jICAgICBjb25zdCBjdXJyZW50SW5wdXQgPSBpbnB1dCgpO1xyXG4jICAgICBpZiAoY3VycmVudElucHV0KSB7XHJcbiMgICAgICAgICBjcmVhdGVUb2RvKGN1cnJlbnRJbnB1dCk7XHJcbiMgICAgICAgICBzZXRJbnB1dChcIlwiKTtcclxuIyAgICAgfVxyXG4jICAgICB9O1xyXG4jICAgICBjb25zdCBvbklucHV0ID0gKGV2ZW50OiBJbnB1dEV2ZW50KSA9PiB7XHJcbiMgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuIyAgICAgc2V0SW5wdXQodGFyZ2V0LnZhbHVlKTtcclxuIyAgICAgfTtcclxuIyAgICAgY29uc3Qgb25LZXlkb3duID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiMgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4jICAgICAgICAgYWRkVG9kbygpO1xyXG4jICAgICB9XHJcbiMgICAgIH07XHJcblxyXG4jICAgICByZXR1cm4gKFxyXG4jICAgICA8ZGl2PlxyXG4jICAgICAgICAgPGlucHV0IHZhbHVlPXtpbnB1dCgpfSBvbklucHV0PXtvbklucHV0fSBvbktleURvd249e29uS2V5ZG93bn0gLz5cclxuIyAgICAgICAgIDxidXR0b24gb25DbGljaz17YWRkVG9kb30+QWRkPC9idXR0b24+XHJcbiMgICAgICAgICA8ZGl2PlxyXG4jICAgICAgICAgPGI+VG9kbzo8L2I+XHJcbiMgICAgICAgICA8Rm9yIGVhY2g9e3VuZG9uZVRvZG9zKCl9PlxyXG4jICAgICAgICAgICAgIHsodG9kbykgPT4ge1xyXG4jICAgICAgICAgICAgIHJldHVybiAoXHJcbiMgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiMgICAgICAgICAgICAgICAgIHt0b2RvLnRleHR9XHJcbiMgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0VG9kb0RvbmUodG9kby5pZCwgdHJ1ZSl9PkRvbmU8L2J1dHRvbj5cclxuIyAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiMgICAgICAgICAgICAgKTtcclxuIyAgICAgICAgICAgICB9fVxyXG4jICAgICAgICAgPC9Gb3I+XHJcbiMgICAgICAgICA8L2Rpdj5cclxuIyAgICAgICAgIDxkaXY+XHJcbiMgICAgICAgICA8Yj5Eb25lOjwvYj5cclxuIyAgICAgICAgIDxGb3IgZWFjaD17ZG9uZVRvZG9zKCl9PlxyXG4jICAgICAgICAgICAgIHsodG9kbykgPT4ge1xyXG4jICAgICAgICAgICAgIHJldHVybiAoXHJcbiMgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiMgICAgICAgICAgICAgICAgIHt0b2RvLnRleHR9XHJcbiMgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gcmVtb3ZlVG9kbyh0b2RvLmlkKX0+UmVtb3ZlPC9idXR0b24+XHJcbiMgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0VG9kb0RvbmUodG9kby5pZCwgZmFsc2UpfT5cclxuIyAgICAgICAgICAgICAgICAgICAgIFVuZG9cclxuIyAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiMgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4jICAgICAgICAgICAgICk7XHJcbiMgICAgICAgICAgICAgfX1cclxuIyAgICAgICAgIDwvRm9yPlxyXG4jICAgICAgICAgPC9kaXY+XHJcbiMgICAgIDwvZGl2PlxyXG4jICAgICApO1xyXG4jIH07XHJcblxyXG4jIHJlbmRlcigoKSA9PiA8QXBwIC8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKSk7Il19
//# sourceURL=c:\github\2023-012-solidjs-coffee-hyperscript-lab\coffee\sketch4.coffee