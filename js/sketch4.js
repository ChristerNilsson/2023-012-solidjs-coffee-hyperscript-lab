// Generated by CoffeeScript 2.5.1
// Inspiration: https://blog.openreplay.com/solid-vs-react-the-fastest-vs-the-most-popular-ui-library/
// Lathund för översättning från Solid JSX till min variant:
// <div a=3 b=4>pelle</div> => div {a:3, b:4},"Pelle"
// 'r4r => App' ersätter 'render(() => <App />, document.getElementById("app"));'
//   (Lägg in id=app i body i index.html)
// saknas en html-kod, skriv in den i utils.js, enligt 'export button = (a...) => h "button", a"'
// ersätt createSignal med signal
// Testkör logiken genom att lägga in anrop till r4r => App i events. 
//   (Rensa med document.body.innerHTML = "" innan varje anrop till r4r => App)
// Använd coffeescripts loopar och if-satser. <For> behövs ej.
// Använd "do" då loopar och events förekommer samtidigt. Annars används loop-variablens sista värde.
// Rensa bort onödiga skräptecken som semikolon, parenteser, måsvingar, </>, och ()
// Till exempel kan man ta bort de sista nio raderna i originalkoden.
// return kan oftast strykas.
// Typer kan tas bort.
var App, inputx, setInputx, setTodos, todos;

import {
  r4r,
  signal,
  memo
} from "/js/utils.js";

import {
  input,
  button,
  div,
  log,
  b
} from "/js/utils.js";

// All data måste ligga före App!
[todos, setTodos] = signal([
  {
    id: "1",
    text: "Adam",
    done: false
  },
  {
    id: "2",
    text: "Bertil",
    done: true
  },
  {
    id: "3",
    text: "Cesar",
    done: false
  },
  {
    id: "4",
    text: "David",
    done: true
  }
]);

[inputx, setInputx] = signal("");

App = () => {
  var addClick, addTodo, createTodo, doneTodos, inp, onkeydown, removeTodo, setTodoDone, todo, undoneTodos;
  doneTodos = memo(() => {
    return todos().filter((todo) => {
      return todo.done;
    });
  });
  undoneTodos = memo(() => {
    return todos().filter((todo) => {
      return !todo.done;
    });
  });
  createTodo = (text) => {
    return setTodos(() => {
      return [
        ...todos(),
        {
          id: `${Math.random()}`,
          text,
          done: false
        }
      ];
    });
  };
  removeTodo = (todoId) => {
    return setTodos(todos().filter((todo) => {
      return todo.id !== todoId;
    }));
  };
  setTodoDone = (todoId, done) => {
    return setTodos(todos().map((todo) => {
      if (todo.id === todoId) {
        return {...todo, done};
      } else {
        return todo;
      }
    }));
  };
  addTodo = () => {
    var currentInput;
    currentInput = inputx();
    if (currentInput) {
      createTodo(currentInput);
      return setInputx("");
    }
  };
  onkeydown = (event) => {
    if (event.key === "Enter") {
      setInputx(event.target.value);
      return addTodo();
    }
  };
  addClick = (event) => {
    setInputx(inp.value);
    return addTodo();
  };
  return div({}, inp = input({
    value: inputx(),
    onkeydown
  }), button({
    onClick: addClick
  }, "Add"), div({}, b({}, "Todo")), (function() {
    var i, len, ref, results;
    ref = undoneTodos();
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      todo = ref[i];
      results.push(((todo) => {
        return div({}, todo.text, button({
          onClick: () => {
            return setTodoDone(todo.id, true);
          }
        }, "Done"));
      })(todo));
    }
    return results;
  }).call(this), div({}, b({}, "Done:"), (function() {
    var i, len, ref, results;
    ref = doneTodos();
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      todo = ref[i];
      results.push(((todo) => {
        return div({}, todo.text, button({
          onClick: () => {
            return removeTodo(todo.id);
          }
        }, "Remove"), button({
          onClick: () => {
            return setTodoDone(todo.id, false);
          }
        }, "Undo"));
      })(todo));
    }
    return results;
  }).call(this)));
};

r4r(() => {
  return App;
});

// Originalkod (85 rader):

// import { For, render } from "solid-js/web";
// import { createMemo, createSignal } from "solid-js";

// interface TODO {
//     id: string;
//     text: string;
//     done: boolean;
// }

// const App = () => {
//     const [todos, setTodos] = createSignal<TODO[]>([]);
//     const [input, setInput] = createSignal("");
//     const doneTodos = createMemo(() => todos().filter((todo) => todo.done));
//     const undoneTodos = createMemo(() => todos().filter((todo) => !todo.done));
//     const createTodo = (text: string) => {
//     setTodos([...todos(), { id: `${Math.random()}`, text, done: false }]);
//     };
//     const removeTodo = (todoId: string) => {
//     setTodos(todos().filter((todo) => todo.id !== todoId));
//     };
//     const setTodoDone = (todoId: string, done: boolean) => {
//     setTodos(
//         todos().map((todo) => {
//         if (todo.id === todoId) {
//             return { ...todo, done };
//         }
//         return todo;
//         })
//     );
//     };
//     const addTodo = () => {
//     const currentInput = input();
//     if (currentInput) {
//         createTodo(currentInput);
//         setInput("");
//     }
//     };
//     const onInput = (event: InputEvent) => {
//     const target = event.target as HTMLInputElement;

//     setInput(target.value);
//     };
//     const onKeydown = (event: KeyboardEvent) => {
//     if (event.key === "Enter") {
//         addTodo();
//     }
//     };

//     return (
//     <div>
//         <input value={input()} onInput={onInput} onKeyDown={onKeydown} />
//         <button onClick={addTodo}>Add</button>
//         <div>
//         <b>Todo:</b>
//         <For each={undoneTodos()}>
//             {(todo) => {
//             return (
//                 <div>
//                 {todo.text}
//                 <button onClick={() => setTodoDone(todo.id, true)}>Done</button>
//                 </div>
//             );
//             }}
//         </For>
//         </div>
//         <div>
//         <b>Done:</b>
//         <For each={doneTodos()}>
//             {(todo) => {
//             return (
//                 <div>
//                 {todo.text}
//                 <button onClick={() => removeTodo(todo.id)}>Remove</button>
//                 <button onClick={() => setTodoDone(todo.id, false)}>
//                     Undo
//                 </button>
//                 </div>
//             );
//             }}
//         </For>
//         </div>
//     </div>
//     );
// };

// render(() => <App />, document.getElementById("app"));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoNC5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxza2V0Y2g0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBY3FCOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsU0FBQSxFQUFBLFFBQUEsRUFBQTs7QUFFckIsT0FBQTtFQUFRLEdBQVI7RUFBWSxNQUFaO0VBQW1CLElBQW5CO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsS0FBUjtFQUFjLE1BQWQ7RUFBcUIsR0FBckI7RUFBeUIsR0FBekI7RUFBNkIsQ0FBN0I7Q0FBQSxNQUFBLGVBSHFCOzs7QUFNckIsQ0FBQyxLQUFELEVBQVEsUUFBUixDQUFBLEdBQW9CLE1BQUEsQ0FBTztFQUMxQjtJQUFDLEVBQUEsRUFBSSxHQUFMO0lBQVUsSUFBQSxFQUFNLE1BQWhCO0lBQXdCLElBQUEsRUFBTTtFQUE5QixDQUQwQjtFQUUxQjtJQUFDLEVBQUEsRUFBSSxHQUFMO0lBQVUsSUFBQSxFQUFNLFFBQWhCO0lBQTBCLElBQUEsRUFBTTtFQUFoQyxDQUYwQjtFQUcxQjtJQUFDLEVBQUEsRUFBSSxHQUFMO0lBQVUsSUFBQSxFQUFNLE9BQWhCO0lBQXlCLElBQUEsRUFBTTtFQUEvQixDQUgwQjtFQUkxQjtJQUFDLEVBQUEsRUFBSSxHQUFMO0lBQVUsSUFBQSxFQUFNLE9BQWhCO0lBQXlCLElBQUEsRUFBTTtFQUEvQixDQUowQjtDQUFQOztBQU1wQixDQUFDLE1BQUQsRUFBUyxTQUFULENBQUEsR0FBc0IsTUFBQSxDQUFPLEVBQVA7O0FBRXRCLEdBQUEsR0FBTSxDQUFBLENBQUEsR0FBQTtBQUVOLE1BQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxVQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsVUFBQSxFQUFBLFdBQUEsRUFBQSxJQUFBLEVBQUE7RUFBQyxTQUFBLEdBQWMsSUFBQSxDQUFLLENBQUEsQ0FBQSxHQUFBO1dB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LENBQUosRUFDQyxJQUFJLENBQUMsSUFETixFQUVDLE1BQUEsQ0FBTztVQUFDLE9BQUEsRUFBUyxDQUFBLENBQUEsR0FBQTttQkFBRyxVQUFBLENBQVcsSUFBSSxDQUFDLEVBQWhCO1VBQUg7UUFBVixDQUFQLEVBQXlDLFFBQXpDLENBRkQsRUFHQyxNQUFBLENBQU87VUFBQyxPQUFBLEVBQVMsQ0FBQSxDQUFBLEdBQUE7bUJBQUcsV0FBQSxDQUFZLElBQUksQ0FBQyxFQUFqQixFQUFxQixLQUFyQjtVQUFIO1FBQVYsQ0FBUCxFQUFpRCxNQUFqRCxDQUhEO01BREUsQ0FBQSxFQUFDO0lBREwsQ0FBQTs7ZUFGRCxDQVZEO0FBeEJLOztBQTBDTixHQUFBLENBQUksQ0FBQSxDQUFBLEdBQUE7U0FBRztBQUFILENBQUo7O0FBeERxQiIsInNvdXJjZXNDb250ZW50IjpbIiMgSW5zcGlyYXRpb246IGh0dHBzOi8vYmxvZy5vcGVucmVwbGF5LmNvbS9zb2xpZC12cy1yZWFjdC10aGUtZmFzdGVzdC12cy10aGUtbW9zdC1wb3B1bGFyLXVpLWxpYnJhcnkvXHJcbiMgTGF0aHVuZCBmw7ZyIMO2dmVyc8OkdHRuaW5nIGZyw6VuIFNvbGlkIEpTWCB0aWxsIG1pbiB2YXJpYW50OlxyXG4jIDxkaXYgYT0zIGI9ND5wZWxsZTwvZGl2PiA9PiBkaXYge2E6MywgYjo0fSxcIlBlbGxlXCJcclxuIyAncjRyID0+IEFwcCcgZXJzw6R0dGVyICdyZW5kZXIoKCkgPT4gPEFwcCAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhcHBcIikpOydcclxuIyAgIChMw6RnZyBpbiBpZD1hcHAgaSBib2R5IGkgaW5kZXguaHRtbClcclxuIyBzYWtuYXMgZW4gaHRtbC1rb2QsIHNrcml2IGluIGRlbiBpIHV0aWxzLmpzLCBlbmxpZ3QgJ2V4cG9ydCBidXR0b24gPSAoYS4uLikgPT4gaCBcImJ1dHRvblwiLCBhXCInXHJcbiMgZXJzw6R0dCBjcmVhdGVTaWduYWwgbWVkIHNpZ25hbFxyXG4jIFRlc3Rrw7ZyIGxvZ2lrZW4gZ2Vub20gYXR0IGzDpGdnYSBpbiBhbnJvcCB0aWxsIHI0ciA9PiBBcHAgaSBldmVudHMuIFxyXG4jICAgKFJlbnNhIG1lZCBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9IFwiXCIgaW5uYW4gdmFyamUgYW5yb3AgdGlsbCByNHIgPT4gQXBwKVxyXG4jIEFudsOkbmQgY29mZmVlc2NyaXB0cyBsb29wYXIgb2NoIGlmLXNhdHNlci4gPEZvcj4gYmVow7Z2cyBlai5cclxuIyBBbnbDpG5kIFwiZG9cIiBkw6UgbG9vcGFyIG9jaCBldmVudHMgZsO2cmVrb21tZXIgc2FtdGlkaWd0LiBBbm5hcnMgYW52w6RuZHMgbG9vcC12YXJpYWJsZW5zIHNpc3RhIHbDpHJkZS5cclxuIyBSZW5zYSBib3J0IG9uw7ZkaWdhIHNrcsOkcHRlY2tlbiBzb20gc2VtaWtvbG9uLCBwYXJlbnRlc2VyLCBtw6VzdmluZ2FyLCA8Lz4sIG9jaCAoKVxyXG4jIFRpbGwgZXhlbXBlbCBrYW4gbWFuIHRhIGJvcnQgZGUgc2lzdGEgbmlvIHJhZGVybmEgaSBvcmlnaW5hbGtvZGVuLlxyXG4jIHJldHVybiBrYW4gb2Z0YXN0IHN0cnlrYXMuXHJcbiMgVHlwZXIga2FuIHRhcyBib3J0LlxyXG5cclxuaW1wb3J0IHtyNHIsc2lnbmFsLG1lbW99IGZyb20gXCIvanMvdXRpbHMuanNcIlxyXG5pbXBvcnQge2lucHV0LGJ1dHRvbixkaXYsbG9nLGJ9IGZyb20gXCIvanMvdXRpbHMuanNcIlxyXG5cclxuIyBBbGwgZGF0YSBtw6VzdGUgbGlnZ2EgZsO2cmUgQXBwIVxyXG5bdG9kb3MsIHNldFRvZG9zXSA9IHNpZ25hbCBbXHJcblx0e2lkOiBcIjFcIiwgdGV4dDogXCJBZGFtXCIsIGRvbmU6IGZhbHNlfSxcclxuXHR7aWQ6IFwiMlwiLCB0ZXh0OiBcIkJlcnRpbFwiLCBkb25lOiB0cnVlfSxcclxuXHR7aWQ6IFwiM1wiLCB0ZXh0OiBcIkNlc2FyXCIsIGRvbmU6IGZhbHNlfSxcclxuXHR7aWQ6IFwiNFwiLCB0ZXh0OiBcIkRhdmlkXCIsIGRvbmU6IHRydWV9LFxyXG5dXHJcbltpbnB1dHgsIHNldElucHV0eF0gPSBzaWduYWwgXCJcIlxyXG5cclxuQXBwID0gPT5cclxuXHJcblx0ZG9uZVRvZG9zICAgPSBtZW1vID0+IHRvZG9zKCkuZmlsdGVyICh0b2RvKSA9PiAgdG9kby5kb25lXHJcblx0dW5kb25lVG9kb3MgPSBtZW1vID0+IHRvZG9zKCkuZmlsdGVyICh0b2RvKSA9PiAhdG9kby5kb25lXHJcblxyXG5cdGNyZWF0ZVRvZG8gPSAodGV4dCkgPT4gc2V0VG9kb3MgPT4gWy4uLnRvZG9zKCksIHsgaWQ6IFwiI3tNYXRoLnJhbmRvbSgpfVwiLCB0ZXh0LCBkb25lOiBmYWxzZSB9XVxyXG5cdHJlbW92ZVRvZG8gPSAodG9kb0lkKSA9PiBzZXRUb2RvcyB0b2RvcygpLmZpbHRlciAodG9kbykgPT4gdG9kby5pZCAhPSB0b2RvSWRcclxuXHRzZXRUb2RvRG9uZSA9ICh0b2RvSWQsIGRvbmUpID0+IHNldFRvZG9zIHRvZG9zKCkubWFwICh0b2RvKSA9PiBpZiB0b2RvLmlkID09IHRvZG9JZCB0aGVuIHsgLi4udG9kbywgZG9uZSB9IGVsc2UgdG9kb1xyXG5cclxuXHRhZGRUb2RvID0gPT5cclxuXHRcdGN1cnJlbnRJbnB1dCA9IGlucHV0eCgpXHJcblx0XHRpZiBjdXJyZW50SW5wdXRcclxuXHRcdFx0Y3JlYXRlVG9kbyBjdXJyZW50SW5wdXRcclxuXHRcdFx0c2V0SW5wdXR4IFwiXCJcclxuXHJcblx0b25rZXlkb3duID0gKGV2ZW50KSA9PlxyXG5cdFx0aWYgZXZlbnQua2V5ID09IFwiRW50ZXJcIlxyXG5cdFx0XHRzZXRJbnB1dHggZXZlbnQudGFyZ2V0LnZhbHVlXHJcblx0XHRcdGFkZFRvZG8oKVxyXG5cclxuXHRhZGRDbGljayA9IChldmVudCkgPT5cclxuXHRcdHNldElucHV0eCBpbnAudmFsdWVcclxuXHRcdGFkZFRvZG8oKVxyXG5cdFxyXG5cdGRpdiB7fSxcclxuXHRcdGlucCA9IGlucHV0IHt2YWx1ZTogaW5wdXR4KCksIG9ua2V5ZG93bn1cclxuXHRcdGJ1dHRvbiB7b25DbGljazogYWRkQ2xpY2t9LCBcIkFkZFwiXHJcblx0XHRkaXYge30sIFxyXG5cdFx0XHRiIHt9LCBcIlRvZG9cIlxyXG5cdFx0Zm9yIHRvZG8gaW4gdW5kb25lVG9kb3MoKVxyXG5cdFx0XHRkbyAodG9kbykgPT5cclxuXHRcdFx0XHRkaXYge30sIFxyXG5cdFx0XHRcdFx0dG9kby50ZXh0XHJcblx0XHRcdFx0XHRidXR0b24ge29uQ2xpY2s6ID0+IHNldFRvZG9Eb25lIHRvZG8uaWQsIHRydWV9LCBcIkRvbmVcIlxyXG5cdFx0ZGl2IHt9LCBcclxuXHRcdFx0YiB7fSwgXCJEb25lOlwiXHJcblx0XHRcdGZvciB0b2RvIGluIGRvbmVUb2RvcygpXHJcblx0XHRcdFx0ZG8gKHRvZG8pID0+XHJcblx0XHRcdFx0XHRkaXYge30sXHJcblx0XHRcdFx0XHRcdHRvZG8udGV4dFxyXG5cdFx0XHRcdFx0XHRidXR0b24ge29uQ2xpY2s6ID0+IHJlbW92ZVRvZG8gdG9kby5pZH0sIFwiUmVtb3ZlXCJcclxuXHRcdFx0XHRcdFx0YnV0dG9uIHtvbkNsaWNrOiA9PiBzZXRUb2RvRG9uZSB0b2RvLmlkLCBmYWxzZX0sIFwiVW5kb1wiXHJcbnI0ciA9PiBBcHBcclxuXHJcbiMgT3JpZ2luYWxrb2QgKDg1IHJhZGVyKTpcclxuXHJcbiMgaW1wb3J0IHsgRm9yLCByZW5kZXIgfSBmcm9tIFwic29saWQtanMvd2ViXCI7XHJcbiMgaW1wb3J0IHsgY3JlYXRlTWVtbywgY3JlYXRlU2lnbmFsIH0gZnJvbSBcInNvbGlkLWpzXCI7XHJcblxyXG4jIGludGVyZmFjZSBUT0RPIHtcclxuIyAgICAgaWQ6IHN0cmluZztcclxuIyAgICAgdGV4dDogc3RyaW5nO1xyXG4jICAgICBkb25lOiBib29sZWFuO1xyXG4jIH1cclxuXHJcbiMgY29uc3QgQXBwID0gKCkgPT4ge1xyXG4jICAgICBjb25zdCBbdG9kb3MsIHNldFRvZG9zXSA9IGNyZWF0ZVNpZ25hbDxUT0RPW10+KFtdKTtcclxuIyAgICAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSBjcmVhdGVTaWduYWwoXCJcIik7XHJcbiMgICAgIGNvbnN0IGRvbmVUb2RvcyA9IGNyZWF0ZU1lbW8oKCkgPT4gdG9kb3MoKS5maWx0ZXIoKHRvZG8pID0+IHRvZG8uZG9uZSkpO1xyXG4jICAgICBjb25zdCB1bmRvbmVUb2RvcyA9IGNyZWF0ZU1lbW8oKCkgPT4gdG9kb3MoKS5maWx0ZXIoKHRvZG8pID0+ICF0b2RvLmRvbmUpKTtcclxuIyAgICAgY29uc3QgY3JlYXRlVG9kbyA9ICh0ZXh0OiBzdHJpbmcpID0+IHtcclxuIyAgICAgc2V0VG9kb3MoWy4uLnRvZG9zKCksIHsgaWQ6IGAke01hdGgucmFuZG9tKCl9YCwgdGV4dCwgZG9uZTogZmFsc2UgfV0pO1xyXG4jICAgICB9O1xyXG4jICAgICBjb25zdCByZW1vdmVUb2RvID0gKHRvZG9JZDogc3RyaW5nKSA9PiB7XHJcbiMgICAgIHNldFRvZG9zKHRvZG9zKCkuZmlsdGVyKCh0b2RvKSA9PiB0b2RvLmlkICE9PSB0b2RvSWQpKTtcclxuIyAgICAgfTtcclxuIyAgICAgY29uc3Qgc2V0VG9kb0RvbmUgPSAodG9kb0lkOiBzdHJpbmcsIGRvbmU6IGJvb2xlYW4pID0+IHtcclxuIyAgICAgc2V0VG9kb3MoXHJcbiMgICAgICAgICB0b2RvcygpLm1hcCgodG9kbykgPT4ge1xyXG4jICAgICAgICAgaWYgKHRvZG8uaWQgPT09IHRvZG9JZCkge1xyXG4jICAgICAgICAgICAgIHJldHVybiB7IC4uLnRvZG8sIGRvbmUgfTtcclxuIyAgICAgICAgIH1cclxuIyAgICAgICAgIHJldHVybiB0b2RvO1xyXG4jICAgICAgICAgfSlcclxuIyAgICAgKTtcclxuIyAgICAgfTtcclxuIyAgICAgY29uc3QgYWRkVG9kbyA9ICgpID0+IHtcclxuIyAgICAgY29uc3QgY3VycmVudElucHV0ID0gaW5wdXQoKTtcclxuIyAgICAgaWYgKGN1cnJlbnRJbnB1dCkge1xyXG4jICAgICAgICAgY3JlYXRlVG9kbyhjdXJyZW50SW5wdXQpO1xyXG4jICAgICAgICAgc2V0SW5wdXQoXCJcIik7XHJcbiMgICAgIH1cclxuIyAgICAgfTtcclxuIyAgICAgY29uc3Qgb25JbnB1dCA9IChldmVudDogSW5wdXRFdmVudCkgPT4ge1xyXG4jICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiMgICAgIHNldElucHV0KHRhcmdldC52YWx1ZSk7XHJcbiMgICAgIH07XHJcbiMgICAgIGNvbnN0IG9uS2V5ZG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4jICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcclxuIyAgICAgICAgIGFkZFRvZG8oKTtcclxuIyAgICAgfVxyXG4jICAgICB9O1xyXG5cclxuIyAgICAgcmV0dXJuIChcclxuIyAgICAgPGRpdj5cclxuIyAgICAgICAgIDxpbnB1dCB2YWx1ZT17aW5wdXQoKX0gb25JbnB1dD17b25JbnB1dH0gb25LZXlEb3duPXtvbktleWRvd259IC8+XHJcbiMgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2FkZFRvZG99PkFkZDwvYnV0dG9uPlxyXG4jICAgICAgICAgPGRpdj5cclxuIyAgICAgICAgIDxiPlRvZG86PC9iPlxyXG4jICAgICAgICAgPEZvciBlYWNoPXt1bmRvbmVUb2RvcygpfT5cclxuIyAgICAgICAgICAgICB7KHRvZG8pID0+IHtcclxuIyAgICAgICAgICAgICByZXR1cm4gKFxyXG4jICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4jICAgICAgICAgICAgICAgICB7dG9kby50ZXh0fVxyXG4jICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFRvZG9Eb25lKHRvZG8uaWQsIHRydWUpfT5Eb25lPC9idXR0b24+XHJcbiMgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4jICAgICAgICAgICAgICk7XHJcbiMgICAgICAgICAgICAgfX1cclxuIyAgICAgICAgIDwvRm9yPlxyXG4jICAgICAgICAgPC9kaXY+XHJcbiMgICAgICAgICA8ZGl2PlxyXG4jICAgICAgICAgPGI+RG9uZTo8L2I+XHJcbiMgICAgICAgICA8Rm9yIGVhY2g9e2RvbmVUb2RvcygpfT5cclxuIyAgICAgICAgICAgICB7KHRvZG8pID0+IHtcclxuIyAgICAgICAgICAgICByZXR1cm4gKFxyXG4jICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4jICAgICAgICAgICAgICAgICB7dG9kby50ZXh0fVxyXG4jICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHJlbW92ZVRvZG8odG9kby5pZCl9PlJlbW92ZTwvYnV0dG9uPlxyXG4jICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFRvZG9Eb25lKHRvZG8uaWQsIGZhbHNlKX0+XHJcbiMgICAgICAgICAgICAgICAgICAgICBVbmRvXHJcbiMgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4jICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuIyAgICAgICAgICAgICApO1xyXG4jICAgICAgICAgICAgIH19XHJcbiMgICAgICAgICA8L0Zvcj5cclxuIyAgICAgICAgIDwvZGl2PlxyXG4jICAgICA8L2Rpdj5cclxuIyAgICAgKTtcclxuIyB9O1xyXG5cclxuIyByZW5kZXIoKCkgPT4gPEFwcCAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhcHBcIikpOyJdfQ==
//# sourceURL=c:\github\2023-012-solidjs-coffee-hyperscript-lab\coffee\sketch4.coffee